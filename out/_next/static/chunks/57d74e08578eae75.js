(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,t=>{"use strict";var a=t.i(43476);function e({className:t="",...e}){return(0,a.jsx)("div",{className:`rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:bg-black dark:border-zinc-800 ${t}`,...e})}function i({className:t="",...e}){return(0,a.jsx)("div",{className:`mb-3 ${t}`,...e})}function r({className:t="",...e}){return(0,a.jsx)("h3",{className:`text-lg font-semibold ${t}`,...e})}function n({className:t="",...e}){return(0,a.jsx)("div",{className:`${t}`,...e})}t.s(["Card",()=>e,"CardContent",()=>n,"CardHeader",()=>i,"CardTitle",()=>r])},93479,t=>{"use strict";var a=t.i(43476),e=t.i(71645);let i=(0,e.forwardRef)(function({className:t="",clearOnFocus:i=!1,...r},n){let[o,s]=(0,e.useState)(!1),l=(0,e.useRef)(void 0),{onFocus:c,onBlur:d,onChange:u,value:p}=r;return(0,a.jsx)("input",{ref:n,className:`w-full h-12 rounded-lg border border-zinc-300 bg-white px-3 text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-[#007AFF]/30 disabled:opacity-50 dark:bg-black dark:border-zinc-700 dark:text-zinc-100 ${t}`,...r,...void 0!==p?{value:o?"":p}:{},onFocus:t=>{l.current=p,s(i&&void 0!==p&&""!==String(p)),c?.(t)},onBlur:t=>{s(!1),d?.(t)},onChange:t=>{s(!1),u?.(t)}})});t.s(["Input",0,i])},30826,t=>{"use strict";let a=null,e=null,i="calentrip_db",r=null,n=!1,o=!1;function s(){try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}return{async createConnection(){},open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}async function l(){if(r)return r;try{try{window.db_disabled&&(o=!0,e=s())}catch{}if(!e)try{let a=await t.A(53119);e=a.CapacitorSQLite??a}catch{o=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}e=s()}let a=e;return r={open:async(t,e=!1,i="no-encryption",r=1)=>{try{return await function(t,a=3e3){return Promise.race([t,new Promise((t,e)=>setTimeout(()=>e(Error("timeout")),a))])}(a.open({database:t,version:r,encrypted:e,mode:i}))}catch{try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}o=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return{execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}}}}}}catch{o=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return e=s(),r={open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}}async function c(){if(!n)try{try{if(window.db_disabled){n=!0;return}}catch{}let t=await l();if(!t){n=!0;return}let a=await t.open(i,!1,"no-encryption",1);await a.execute(`
      CREATE TABLE IF NOT EXISTS trips (
        id TEXT PRIMARY KEY NOT NULL,
        title TEXT NOT NULL,
        date TEXT NOT NULL,
        passengers INTEGER,
        flightNotes TEXT,
        reachedFinalCalendar INTEGER DEFAULT 0,
        savedCalendarName TEXT,
        savedAt INTEGER
      );
    `),await a.execute(`
      CREATE TABLE IF NOT EXISTS events (
        event_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        name TEXT NOT NULL,
        label TEXT,
        date TEXT NOT NULL,
        time TEXT,
        address TEXT,
        type TEXT,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `),await a.execute(`
      CREATE TABLE IF NOT EXISTS attachments (
        att_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        leg TEXT NOT NULL,
        name TEXT NOT NULL,
        type TEXT NOT NULL,
        size INTEGER NOT NULL,
        file_id TEXT NOT NULL,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `);try{await a.execute("ALTER TABLE attachments ADD COLUMN category TEXT")}catch{}try{await a.execute("ALTER TABLE attachments ADD COLUMN ref TEXT")}catch{}await a.close(),n=!0}catch{n=!0}}async function d(){try{if(!a)try{let e=await t.A(40402);a=e.Preferences??e}catch{}let e=a?await a.get({key:"migration_complete"}):void 0;if("true"===(e?.value||""))return}catch{}try{let t=localStorage.getItem("calentrip:trips"),e=t?JSON.parse(t):[];if(!e.length){a&&await a.set({key:"migration_complete",value:"true"});return}let r=await l();if(!r){a&&await a.set({key:"migration_complete",value:"true"});return}let n=await r.open(i,!1,"no-encryption",1);for(let t of e){let a=JSON.stringify(t.flightNotes||[]),e=+!!t.reachedFinalCalendar,i=t.savedAt??Date.now();await n.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[t.id,t.title,t.date,t.passengers,a,e,t.savedCalendarName||null,i]);let r=t.savedEvents||[];if(Array.isArray(r)&&r.length)for(let a of(await n.run("DELETE FROM events WHERE trip_id = ?",[t.id]),r))await n.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[t.id,a.name||a.label||"Evento",a.label||null,a.date,a.time||null,a.address||null,a.type||null]);let o=t.attachments||[];if(Array.isArray(o)&&o.length)for(let a of(await n.run("DELETE FROM attachments WHERE trip_id = ?",[t.id]),o))await n.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[t.id,a.leg,a.name,a.type,a.size,a.id||""])}await n.close(),a&&await a.set({key:"migration_complete",value:"true"})}catch{try{a&&await a.set({key:"migration_complete",value:"true"})}catch{}}}async function u(t){await c();let a=await l();if(!a||o){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),e=[t,...a].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(e))}catch{}return}try{let e=await a.open(i,!1,"no-encryption",1);await e.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[t.id,t.title,t.date,t.passengers,JSON.stringify(t.flightNotes||[]),+!!t.reachedFinalCalendar,t.savedCalendarName||null,Date.now()]),await e.close()}catch{o=!0;try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),e=[t,...a].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(e))}catch{}}}async function p(t,a){if(await c(),!await l()||o){try{let e=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=e.findIndex(a=>a.id===t);if(i>=0){let t=[...e];t[i]={...t[i],...a},localStorage.setItem("calentrip:trips",JSON.stringify(t))}}catch{}return}let e=[],r=[];if(void 0!==a.title&&(e.push("title = ?"),r.push(a.title)),void 0!==a.date&&(e.push("date = ?"),r.push(a.date)),void 0!==a.passengers&&(e.push("passengers = ?"),r.push(a.passengers)),void 0!==a.flightNotes&&(e.push("flightNotes = ?"),r.push(JSON.stringify(a.flightNotes||[]))),void 0!==a.reachedFinalCalendar&&(e.push("reachedFinalCalendar = ?"),r.push(+!!a.reachedFinalCalendar)),void 0!==a.savedCalendarName&&(e.push("savedCalendarName = ?"),r.push(a.savedCalendarName||null)),void 0!==a.savedAt&&(e.push("savedAt = ?"),r.push(a.savedAt)),!e.length)return;let n=`UPDATE trips SET ${e.join(", ")} WHERE id = ?`,s=await l(),d=await s.open(i,!1,"no-encryption",1);await d.run(n,[...r,t]),await d.close()}async function y(t,a){await c();let e=await l();if(!e||o){try{let e=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=e.findIndex(a=>a.id===t);if(i>=0){let t=[...e];t[i].savedEvents=a,localStorage.setItem("calentrip:trips",JSON.stringify(t))}}catch{}return}let r=await e.open(i,!1,"no-encryption",1);for(let e of(await r.run("DELETE FROM events WHERE trip_id = ?",[t]),a))await r.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[t,e.name||e.label||"Evento",e.label||null,e.date,e.time||null,e.address||null,e.type||null]);await r.close()}async function m(){await c();let t=await l();if(!t||o)try{return[...JSON.parse(localStorage.getItem("calentrip:trips")||"[]")].sort((t,a)=>(t.date||"").localeCompare(a.date||""))}catch{return[]}let a=await t.open(i,!1,"no-encryption",1),e=await a.query("SELECT id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt FROM trips ORDER BY date DESC");await a.close();let r=[];for(let t of e?.values||[]){let[a,e,i,n,o,s,l,c]=t,d=(()=>{try{return JSON.parse(String(o||"[]"))}catch{return[]}})();r.push({id:a,title:e,date:i,passengers:Number(n||0),flightNotes:d,reachedFinalCalendar:!!s,savedCalendarName:l||void 0,savedAt:c||void 0})}return r}async function E(t){await c();let a=await l();if(!a||o)try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(a=>a.id===t);return a?.savedEvents||[]}catch{return[]}let e=await a.open(i,!1,"no-encryption",1),r=await e.query("SELECT name, label, date, time, address, type FROM events WHERE trip_id = ? ORDER BY date ASC, time ASC",[t]);await e.close();let n=[];for(let t of r?.values||[]){let[a,e,i,r,o,s]=t;n.push({name:a,label:e||void 0,date:i,time:r||void 0,address:o||void 0,type:s||void 0})}return n}async function f(t){await c();let a=await l();if(!a||o){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").filter(a=>a.id!==t);localStorage.setItem("calentrip:trips",JSON.stringify(a))}catch{}return}let e=await a.open(i,!1,"no-encryption",1);await e.run("DELETE FROM events WHERE trip_id = ?",[t]),await e.run("DELETE FROM attachments WHERE trip_id = ?",[t]),await e.run("DELETE FROM trips WHERE id = ?",[t]),await e.close()}async function N(t,a){await c();let e=await l();if(!e||o){try{let e=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=e.findIndex(a=>a.id===t);if(i>=0){let t=[...e];t[i].attachments=a,localStorage.setItem("calentrip:trips",JSON.stringify(t))}}catch{}return}let r=await e.open(i,!1,"no-encryption",1);for(let e of(await r.run("DELETE FROM attachments WHERE trip_id = ?",[t]),a))await r.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[t,e.leg,e.name,e.type,e.size,e.id]);await r.close()}async function h(t,a,e,r){await c();let n=await l();if(!n||o){try{let i=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),n=i.findIndex(a=>a.id===t);if(n>=0){let t=[...i],o=(t[n].attachments||[]).concat(r.map(t=>({category:a,ref:e,name:t.name,type:t.type,size:t.size,id:t.id})));t[n].attachments=o,localStorage.setItem("calentrip:trips",JSON.stringify(t))}}catch{}return}let s=await n.open(i,!1,"no-encryption",1);for(let i of r)await s.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id, category, ref) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[t,a,i.name,i.type,i.size,i.id,a,e]);await s.close()}async function T(t,a,e){await c();let r=await l();if(!r||o)try{let i=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(a=>a.id===t);return(i?.attachments||[]).filter(t=>(!a||t.category===a||t.leg===a)&&(!e||t.ref===e)).map(t=>({name:t.name,type:t.type,size:t.size,id:t.id||""}))}catch{return[]}let n=await r.open(i,!1,"no-encryption",1),s="SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",d=[t];a&&(s+=" AND category = ?",d.push(a)),e&&(s+=" AND ref = ?",d.push(e));let u=await n.query(s,d);return await n.close(),(u?.values||[]).map(t=>{let[a,e,i,r]=t;return{name:a,type:e,size:Number(i||0),id:r}})}async function g(t,a){await c();let e=await l();if(!e||o)try{let e=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(a=>a.id===t),i=e?.attachments||[],r=i.map(t=>({name:t.name,type:t.type,size:t.size,id:t.id||""}));return a?r.filter((t,e)=>i[e]?.leg===a):r}catch{return[]}let r=await e.open(i,!1,"no-encryption",1),n=await r.query(a?"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ? AND leg = ?":"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",a?[t,a]:[t]);return await r.close(),(n?.values||[]).map(t=>{let[a,e,i,r]=t;return{name:a,type:e,size:Number(i||0),id:r}})}t.s(["addTrip",()=>u,"getRefAttachments",()=>T,"getSavedTrips",()=>m,"getTripAttachments",()=>g,"getTripEvents",()=>E,"initDatabase",()=>c,"migrateFromLocalStorage",()=>d,"removeTrip",()=>f,"saveCalendarEvents",()=>y,"saveRefAttachments",()=>h,"saveTripAttachments",()=>N,"updateTrip",()=>p])},22408,t=>{t.v([{iata:"GRU",name:"São Paulo/Guarulhos–Governador André Franco Montoro International Airport",city:"São Paulo",country:"Brazil",aliases:["Sao Paulo","Guarulhos"]},{iata:"CGH",name:"São Paulo/Congonhas Airport",city:"São Paulo",country:"Brazil",aliases:["Congonhas"]},{iata:"VCP",name:"Viracopos–Campinas International Airport",city:"Campinas",country:"Brazil",aliases:["Campinas"]},{iata:"GIG",name:"Rio de Janeiro/Galeão–Antonio Carlos Jobim International Airport",city:"Rio de Janeiro",country:"Brazil",aliases:["Galeao","Galeão","Rio"]},{iata:"SDU",name:"Santos Dumont Airport",city:"Rio de Janeiro",country:"Brazil",aliases:["Santos Dumont"]},{iata:"BSB",name:"Brasília International Airport",city:"Brasília",country:"Brazil",aliases:["Brasilia"]},{iata:"SSA",name:"Deputado Luís Eduardo Magalhães International Airport",city:"Salvador",country:"Brazil",aliases:["Salvador"]},{iata:"REC",name:"Recife/Guararapes–Gilberto Freyre International Airport",city:"Recife",country:"Brazil",aliases:["Recife"]},{iata:"JFK",name:"John F. Kennedy International Airport",city:"New York",country:"United States",aliases:["NYC","Nova Iorque"]},{iata:"LGA",name:"LaGuardia Airport",city:"New York",country:"United States",aliases:["La Guardia","NYC","Nova Iorque"]},{iata:"EWR",name:"Newark Liberty International Airport",city:"Newark",country:"United States",aliases:["NYC","Nova Iorque"]},{iata:"LHR",name:"London Heathrow Airport",city:"London",country:"United Kingdom",aliases:["Heathrow","Londres"]},{iata:"LGW",name:"London Gatwick Airport",city:"London",country:"United Kingdom",aliases:["Gatwick","Londres"]},{iata:"LCY",name:"London City Airport",city:"London",country:"United Kingdom",aliases:["Londres"]},{iata:"CDG",name:"Paris Charles de Gaulle Airport",city:"Paris",country:"France",aliases:["Charles de Gaulle","Paris"]},{iata:"ORY",name:"Paris Orly Airport",city:"Paris",country:"France",aliases:["Orly","Paris"]},{iata:"AMS",name:"Amsterdam Schiphol Airport",city:"Amsterdam",country:"Netherlands",aliases:["Schiphol","Amsterdã"]},{iata:"FRA",name:"Frankfurt Airport",city:"Frankfurt",country:"Germany",aliases:["Frankfurt"]},{iata:"MUC",name:"Munich Airport",city:"Munich",country:"Germany",aliases:["Munique"]},{iata:"MAD",name:"Adolfo Suárez Madrid–Barajas Airport",city:"Madrid",country:"Spain",aliases:["Madrid"]},{iata:"BCN",name:"Barcelona–El Prat Airport",city:"Barcelona",country:"Spain",aliases:["Barcelona"]},{iata:"LIS",name:"Lisbon Humberto Delgado Airport",city:"Lisbon",country:"Portugal",aliases:["Lisboa"]},{iata:"OPO",name:"Francisco Sá Carneiro Airport",city:"Porto",country:"Portugal",aliases:["Porto"]},{iata:"DXB",name:"Dubai International Airport",city:"Dubai",country:"United Arab Emirates",aliases:["Dubai"]},{iata:"DOH",name:"Hamad International Airport",city:"Doha",country:"Qatar",aliases:["Doha"]},{iata:"NRT",name:"Narita International Airport",city:"Tokyo",country:"Japan",aliases:["Tóquio","Tokyo"]},{iata:"HND",name:"Haneda Airport",city:"Tokyo",country:"Japan",aliases:["Tóquio"]}])},62071,t=>{"use strict";var a=t.i(22408);let e=null,i=null,r="calentrip:airports:v1";function n(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}async function o(){if(e)return e;let t=function(){try{let t=localStorage.getItem(r);return t?JSON.parse(t):null}catch{return null}}();return t&&t.length>5e3?e=c(t):(i||(i=(async()=>{try{let t=await fetch("https://raw.githubusercontent.com/mwgg/Airports/master/airports.json"),a=await t.json(),i=Object.values(a).map(t=>({iata:t.iata??"",name:t.name??"",city:t.city??"",country:t.country??"",aliases:[]})).filter(t=>t.iata&&3===t.iata.length),n=c(i);e=n;try{localStorage.setItem(r,JSON.stringify(n))}catch{}return n}catch{let t=c(a.default??[]);return e=t,t}})()),i)}async function s(t){let a=n(t.trim());return a?(await o()).filter(t=>[t.iata,t.name,t.city,t.country,...t.aliases??[]].map(t=>n(t)).some(t=>t.includes(a))).sort((t,a)=>d(t)-d(a)).slice(0,12):[]}function l(){e=null,i=null;try{localStorage.removeItem(r)}catch{}}function c(t){let a=(a,e)=>{let i=n(a);t.forEach(t=>{n(t.city)===i&&(t.aliases=Array.from(new Set([...t.aliases??[],...e])))})};return a("New York",["NYC","Nova Iorque","Nueva York"]),a("London",["Londres"]),a("Tokyo",["Tóquio","Tokio"]),a("Tokyo",["Narita","Haneda"]),a("São Paulo",["Sao Paulo"]),a("Rio de Janeiro",["Rio"]),a("Paris",["París"]),t}function d(t){let a=n(t.city),e={[n("São Paulo")]:["GRU","CGH","VCP"],[n("Rio de Janeiro")]:["GIG","SDU"],[n("New York")]:["JFK","LGA","EWR"],[n("London")]:["LHR","LGW","LCY"],[n("Paris")]:["CDG","ORY"],[n("Tokyo")]:["HND","NRT"]}[a],i=e?e.indexOf(t.iata):-1;return(i>=0?i:99)*10+(/international/i.test(t.name)?-1:0)}async function u(t){return(await o()).find(a=>a.iata.toUpperCase()===t.toUpperCase())??null}async function p(t){let a=await u(t);return a?a.country??null:null}t.s(["clearAirportsCache",()=>l,"findAirportByIata",()=>u,"getCountryByIata",()=>p,"searchAirportsAsync",()=>s])},74870,t=>{"use strict";let a="calentrip:premium";function e(t){let e=function(){try{let t=localStorage.getItem(a),e=t?JSON.parse(t):[],i=Date.now();return e.filter(t=>t.expiresAt>i).map(t=>t.tripId)}catch{return[]}}();return e.includes("global")||e.includes(t)}function i(t){var e="global";try{let i=localStorage.getItem(a),r=(i?JSON.parse(i):[]).filter(t=>t.tripId!==e);r.push({tripId:e,expiresAt:t}),localStorage.setItem(a,JSON.stringify(r))}catch{}}t.s(["isTripPremium",()=>e,"setGlobalPremium",()=>i])},76855,t=>{"use strict";function a(t,a,e){let i="flight"===t;if(!e||!i&&!a)return[];let r=[];return i?(r.push("BEGIN:VALARM","ACTION:DISPLAY","DESCRIPTION:Lembrete de voo","TRIGGER:-P1D","END:VALARM"),r.push("BEGIN:VALARM","ACTION:DISPLAY","DESCRIPTION:Lembrete de voo","TRIGGER:-PT60M","END:VALARM")):r.push("BEGIN:VALARM","ACTION:DISPLAY",`DESCRIPTION:${"transport"===t?"Lembrete de transporte":"Lembrete de atividade"}`,`TRIGGER:${"activity"===t||"restaurant"===t?"-PT60M":"-PT120M"}`,"END:VALARM"),r}t.s(["alarmForEvent",()=>a])},53119,t=>{t.v(a=>Promise.all(["static/chunks/234e8831830d8296.js"].map(a=>t.l(a))).then(()=>a(51001)))},40402,t=>{t.v(a=>Promise.all(["static/chunks/da5d6c94d3bd3190.js"].map(a=>t.l(a))).then(()=>a(58981)))}]);