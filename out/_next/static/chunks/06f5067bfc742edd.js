(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33770,e=>{"use strict";var t=e.i(82568);class n extends t.WebPlugin{constructor(){super()}loadScript(){if("undefined"==typeof document)return;let e="gapi";if(null==document?void 0:document.getElementById(e))return;let t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.defer=!0,n.async=!0,n.id=e,n.onload=this.platformJsLoaded.bind(this),n.src="https://apis.google.com/js/platform.js",t.appendChild(n)}initialize(e={clientId:"",scopes:[],grantOfflineAccess:!1}){var t,n;if("undefined"==typeof window)return;let i=null==(t=document.getElementsByName("google-signin-client_id")[0])?void 0:t.content,s=e.clientId||i||"";return s||console.warn("GoogleAuthPlugin - clientId is empty"),this.options={clientId:s,grantOfflineAccess:null!=(n=e.grantOfflineAccess)&&n,scopes:e.scopes||[]},this.gapiLoaded=new Promise(e=>{window.gapiResolve=e,this.loadScript()}),this.addUserChangeListener(),this.gapiLoaded}platformJsLoaded(){gapi.load("auth2",()=>{let e={client_id:this.options.clientId,plugin_name:"CodetrixStudioCapacitorGoogleAuth"};this.options.scopes.length&&(e.scope=this.options.scopes.join(" ")),gapi.auth2.init(e),window.gapiResolve()})}async signIn(){return new Promise(async(e,t)=>{var n;try{let t,i=null!=(n=this.options.grantOfflineAccess)&&n;i?t=(await gapi.auth2.getAuthInstance().grantOfflineAccess()).code:await gapi.auth2.getAuthInstance().signIn();let s=gapi.auth2.getAuthInstance().currentUser.get();i&&await s.reloadAuthResponse();let a=this.getUserFrom(s);a.serverAuthCode=t,e(a)}catch(e){t(e)}})}async refresh(){let e=await gapi.auth2.getAuthInstance().currentUser.get().reloadAuthResponse();return{accessToken:e.access_token,idToken:e.id_token,refreshToken:""}}async signOut(){return gapi.auth2.getAuthInstance().signOut()}async addUserChangeListener(){await this.gapiLoaded,gapi.auth2.getAuthInstance().currentUser.listen(e=>{this.notifyListeners("userChange",e.isSignedIn()?this.getUserFrom(e):null)})}getUserFrom(e){let t={},n=e.getBasicProfile();t.email=n.getEmail(),t.familyName=n.getFamilyName(),t.givenName=n.getGivenName(),t.id=n.getId(),t.imageUrl=n.getImageUrl(),t.name=n.getName();let i=e.getAuthResponse(!0);return t.authentication={accessToken:i.access_token,idToken:i.id_token,refreshToken:""},t}}e.s(["GoogleAuthWeb",()=>n])}]);