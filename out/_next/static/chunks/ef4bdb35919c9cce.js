(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476);function a({className:e="",...a}){return(0,t.jsx)("div",{className:`rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:bg-black dark:border-zinc-800 ${e}`,...a})}function s({className:e="",...a}){return(0,t.jsx)("div",{className:`mb-3 ${e}`,...a})}function r({className:e="",...a}){return(0,t.jsx)("h3",{className:`text-lg font-semibold ${e}`,...a})}function i({className:e="",...a}){return(0,t.jsx)("div",{className:`${e}`,...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardHeader",()=>s,"CardTitle",()=>r])},74870,e=>{"use strict";let t="calentrip:premium";function a(e){let a=function(){try{let e=localStorage.getItem(t),a=e?JSON.parse(e):[],s=Date.now();return a.filter(e=>e.expiresAt>s).map(e=>e.tripId)}catch{return[]}}();return a.includes("global")||a.includes(e)}function s(e){var a="global";try{let s=localStorage.getItem(t),r=(s?JSON.parse(s):[]).filter(e=>e.tripId!==a);r.push({tripId:a,expiresAt:e}),localStorage.setItem(t,JSON.stringify(r))}catch{}}e.s(["isTripPremium",()=>a,"setGlobalPremium",()=>s])},13278,e=>{"use strict";var t=e.i(47167),a=e.i(43476),s=e.i(17255),r=e.i(33022),i=e.i(15288),n=e.i(19455),l=e.i(74870),c=e.i(73635),d=e.i(71645),o=e.i(33499),u=e.i(82568),h=e.i(18566);function m(){let m=(0,h.useRouter)(),{data:x,status:p}=(0,s.useSession)(),[j,g]=(0,d.useState)([]),b=(0,d.useMemo)(()=>j.length?j[0]:null,[j]),v=(0,d.useMemo)(()=>!!b&&(0,l.isTripPremium)(b.id),[b]),[f,N]=(0,d.useState)(""),{show:y}=(0,c.useToast)(),{t:C}=(0,o.useI18n)(),[k,S]=(0,d.useState)(null),[T,w]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{g((0,r.getTrips)());try{let e=localStorage.getItem("calentrip:premium"),t=(e?JSON.parse(e):[]).find(e=>"global"===e.tripId&&e.expiresAt>Date.now());if(t){let e=new Date(t.expiresAt),a=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0");N(`${a}/${s}`)}else N("")}catch{N("")}},[]),(0,d.useEffect)(()=>{(async()=>{try{let a=await e.A(50131),s=await a.ensureProduct(t.default.env.NEXT_PUBLIC_GOOGLE_PLAY_PRODUCT_ID||"trip_premium");s?.price&&S(s.price)}catch{}})()},[]),(0,a.jsxs)("div",{className:"min-h-screen px-4 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"container-page flex items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"rounded-md p-2 border border-zinc-200 dark:border-zinc-800",onClick:()=>m.push("/flights/search"),children:(0,a.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"close"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-1 text-2xl font-semibold text-[var(--brand)]",children:C("profileTitle")}),(0,a.jsx)("p",{className:"text-sm text-zinc-600",children:C("profileSubtitleMonthly")})]})]}),(0,a.jsx)("div",{className:"container-page flex justify-center",children:(0,a.jsx)(n.Button,{type:"button",className:"h-12 w-64 bg-[var(--brand)] text-white font-semibold rounded-lg shadow-lg hover:brightness-95",onClick:()=>m.push("/"),children:"Ir para Tela Inicial"})}),(0,a.jsxs)("div",{className:"container-page grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)(i.Card,{className:"authenticated"===p?"rounded-xl shadow-md":"rounded-xl shadow-md cursor-pointer",onClick:"authenticated"===p?void 0:()=>m.push("/login?next=/subscription/checkout"),children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Conta"})}),(0,a.jsx)(i.CardContent,{className:"space-y-3 text-sm",children:"authenticated"===p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black text-sm",children:(x?.user?.name||x?.user?.email||"PF").slice(0,2).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold",children:x?.user?.name||"Usuário"}),(0,a.jsx)("div",{className:"text-xs text-zinc-600",children:x?.user?.email||""})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,a.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>m.push("/calendar/final"),children:"Minhas Viagens"}),(0,a.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>m.push("/subscription/checkout"),children:"Pagamento"})]}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:(0,a.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>(0,s.signOut)(),children:"Sair"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black p-4 text-center",children:[(0,a.jsx)("div",{className:"text-base font-semibold",children:"Faça login para desbloquear recursos premium"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(n.Button,{type:"button",className:"h-10 rounded-lg",onClick:()=>m.push("/login?next=/profile"),children:"Entre ou cadastre-se"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-4 opacity-50",children:[(0,a.jsx)(n.Button,{type:"button",variant:"outline",disabled:!0,children:"Minhas Viagens"}),(0,a.jsx)(n.Button,{type:"button",variant:"outline",disabled:!0,children:"Pagamento"})]})]})})]}),(0,a.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:C("subscriptionMonthlyTitle")})}),(0,a.jsx)(i.CardContent,{className:"space-y-3 text-sm",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[C("currentTripLabel"),": ",b.title," • ",b.date]}),(0,a.jsxs)("div",{children:[C("statusLabel"),": ",v?`${C("activeStatus")}${f?` (${C("untilWord")} ${f})`:""}`:C("inactiveStatus")]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-zinc-600",children:C("subMonthlyText")}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>m.push("/subscription/checkout"),children:"Assinar agora"}),(0,a.jsx)("span",{className:"text-xs text-zinc-500",children:"Revisar benefícios e concluir compra"})]}),v?null:(0,a.jsx)(n.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",disabled:T,onClick:async()=>{try{w(!0);let t=await e.A(50131),a=x?.user?.email||x?.user?.name||void 0,s=await t.completePurchaseForTrip("global",a);if(s?.ok)y(C("purchaseSuccess"),{variant:"success"}),m.push("/calendar/final");else{let e=s?.error==="billing"?"Disponível no app Android. Instale via Google Play.":s?.error==="product"?"Produto não encontrado no Google Play.":s?.error==="purchase"?"Compra cancelada ou falhou.":s?.error==="token"?"Token de compra não recebido.":s?.error==="verify"?"Falha ao verificar a compra.":s?.error==="ack"?"Falha ao confirmar a compra.":s?.error==="store"?"Falha ao salvar assinatura.":C("purchaseFail");y(e,{variant:"error"})}}catch{y(C("purchaseError"),{variant:"error"})}finally{w(!1)}},children:k?`${C("subscribeMonthlyButton").split("(")[0].trim()} (${k}/m\xeas)`:C("subscribeMonthlyButton")}),u.Capacitor.isNativePlatform()||T?null:(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Para comprar, abra o app Android instalado via Google Play."})]})]}):(0,a.jsx)("div",{children:C("subscriptionNoTripHint")})})]})]}),(0,a.jsx)("div",{className:"container-page",children:(0,a.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Informações"})}),(0,a.jsxs)(i.CardContent,{className:"space-y-2 text-sm",children:[(0,a.jsx)("div",{children:C("planFreeBullet")}),(0,a.jsx)("div",{children:C("planPaidBullet")}),(0,a.jsx)("div",{children:C("validityBullet")}),(0,a.jsx)("div",{children:C("billingBullet")}),(0,a.jsx)("div",{children:C("legalBullet")})]})]})}),(0,a.jsx)("div",{className:"container-page",children:(0,a.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:C("deleteDataTitle")})}),(0,a.jsxs)(i.CardContent,{className:"space-y-2 text-sm",children:[(0,a.jsx)("div",{children:C("deleteDataDesc")}),(0,a.jsx)(n.Button,{type:"button",variant:"outline",onClick:async()=>{try{let e=await fetch("/api/account/delete",{method:"POST"}),t=await e.json();t?.ok?y(C("deleteSuccess"),{variant:"success"}):y(C("deleteFail"),{variant:"error"})}catch{y(C("deleteError"),{variant:"error"})}},children:C("deleteDataButton")})]})]})})]})}e.s(["default",()=>m])},50131,e=>{e.v(t=>Promise.all(["static/chunks/48b9423674f6a5d1.js"].map(t=>e.l(t))).then(()=>t(46588)))}]);