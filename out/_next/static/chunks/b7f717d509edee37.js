(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var a=e.i(43476);function t({className:e="",...t}){return(0,a.jsx)("div",{className:`rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:bg-black dark:border-zinc-800 ${e}`,...t})}function s({className:e="",...t}){return(0,a.jsx)("div",{className:`mb-3 ${e}`,...t})}function r({className:e="",...t}){return(0,a.jsx)("h3",{className:`text-lg font-semibold ${e}`,...t})}function i({className:e="",...t}){return(0,a.jsx)("div",{className:`${e}`,...t})}e.s(["Card",()=>t,"CardContent",()=>i,"CardHeader",()=>s,"CardTitle",()=>r])},74870,e=>{"use strict";let a="calentrip:premium";function t(e){let t=function(){try{let e=localStorage.getItem(a),t=e?JSON.parse(e):[],s=Date.now();return t.filter(e=>e.expiresAt>s).map(e=>e.tripId)}catch{return[]}}();return t.includes("global")||t.includes(e)}function s(e){var t="global";try{let s=localStorage.getItem(a),r=(s?JSON.parse(s):[]).filter(e=>e.tripId!==t);r.push({tripId:t,expiresAt:e}),localStorage.setItem(a,JSON.stringify(r))}catch{}}e.s(["isTripPremium",()=>t,"setGlobalPremium",()=>s])},13278,e=>{"use strict";var a=e.i(47167),t=e.i(43476),s=e.i(17255),r=e.i(33022),i=e.i(15288),l=e.i(19455),n=e.i(74870),c=e.i(73635),o=e.i(71645),d=e.i(33499),u=e.i(82568),m=e.i(18566);function h(){let h=(0,m.useRouter)(),{data:x,status:p}=(0,s.useSession)(),[j,g]=(0,o.useState)([]),v=(0,o.useMemo)(()=>j.length?j[0]:null,[j]),b=(0,o.useMemo)(()=>!!v&&(0,n.isTripPremium)(v.id),[v]),[f,C]=(0,o.useState)(""),{show:N}=(0,c.useToast)(),{t:y}=(0,d.useI18n)(),[S,k]=(0,o.useState)(null),[w,T]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{g((0,r.getTrips)());try{let e=localStorage.getItem("calentrip:premium"),a=(e?JSON.parse(e):[]).find(e=>"global"===e.tripId&&e.expiresAt>Date.now());if(a){let e=new Date(a.expiresAt),t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0");C(`${t}/${s}`)}else C("")}catch{C("")}},[]),(0,o.useEffect)(()=>{(async()=>{try{let t=await e.A(50131),s=await t.ensureProduct(a.default.env.NEXT_PUBLIC_GOOGLE_PLAY_PRODUCT_ID||"trip_premium");s?.price&&k(s.price)}catch{}})()},[]),(0,t.jsxs)("div",{className:"min-h-screen px-4 py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"container-page flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"rounded-md p-2 border border-zinc-200 dark:border-zinc-800",onClick:()=>h.push("/flights/search"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"close"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"mb-1 text-2xl font-semibold text-[var(--brand)]",children:y("profileTitle")}),(0,t.jsx)("p",{className:"text-sm text-zinc-600",children:y("profileSubtitleMonthly")})]})]}),(0,t.jsxs)("div",{className:"container-page grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Conta"})}),(0,t.jsx)(i.CardContent,{className:"space-y-3 text-sm",children:"authenticated"===p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[x?.user?.image?(0,t.jsx)("img",{src:x.user.image,alt:"Foto",className:"h-10 w-10 rounded-full object-cover"}):(0,t.jsx)("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black text-sm",children:(x?.user?.name||x?.user?.email||"PF").slice(0,2).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:x?.user?.name||"Usuário"}),(0,t.jsx)("div",{className:"text-xs text-zinc-600",children:x?.user?.email||""})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>h.push("/calendar/final"),children:"Minhas Viagens"}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>h.push("/subscription/checkout"),children:"Pagamento"})]}),(0,t.jsx)("div",{className:"flex gap-2 mt-2",children:(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>(0,s.signOut)(),children:"Sair"})})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"rounded-lg p-4 text-center border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)("div",{className:"text-base font-semibold mb-3",children:"Entre com sua conta Google"}),(0,t.jsxs)(l.Button,{type:"button",className:"h-10 rounded-lg bg-white text-black border border-zinc-300 hover:bg-zinc-50 flex items-center justify-center gap-2",onClick:()=>(0,s.signIn)("google"),children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"h-5 w-5",children:[(0,t.jsx)("path",{fill:"#FFC107",d:"M43.6 20.5H42V20H24v8h11.3C33.7 31.9 29.3 35 24 35c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.3 0 6.3 1.2 8.6 3.4l5.7-5.7C33.7 3.2 29.1 1 24 1 11.8 1 2 10.8 2 23s9.8 22 22 22c12.1 0 21-9.8 21-21 0-1.7-.2-3.3-.4-4.5z"}),(0,t.jsx)("path",{fill:"#FF3D00",d:"M6.3 14.7l6.6 4.8C14.3 16.3 18.8 13 24 13c3.3 0 6.3 1.2 8.6 3.4l5.7-5.7C33.7 3.2 29.1 1 24 1 16.3 1 9.6 5.3 6.3 11.7z"}),(0,t.jsx)("path",{fill:"#4CAF50",d:"M24 45c5.2 0 9.9-2 13.4-5.2l-6.2-5.2C29.9 36.6 27.1 37.7 24 37.7c-5.3 0-9.8-3.3-11.4-7.9l-6.4 5C9.6 42.7 16.3 47 24 47z"}),(0,t.jsx)("path",{fill:"#1976D2",d:"M43.6 20.5H42V20H24v8h11.3c-1.7 3.9-5.7 6.7-11.3 6.7-5.3 0-9.8-3.3-11.4-7.9l-6.4 5C9.6 42.7 16.3 47 24 47c12.1 0 21-9.8 21-21 0-1.7-.2-3.3-.4-4.5z"})]}),"Entrar com Google"]}),(0,t.jsx)("div",{className:"mt-3 text-xs text-zinc-500",children:"Ao entrar, usaremos seu nome, e-mail e foto da sua conta Google."})]})})})]}),(0,t.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:y("subscriptionMonthlyTitle")})}),(0,t.jsx)(i.CardContent,{className:"space-y-3 text-sm",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[y("currentTripLabel"),": ",v.title," • ",v.date]}),(0,t.jsxs)("div",{children:[y("statusLabel"),": ",b?`${y("activeStatus")}${f?` (${y("untilWord")} ${f})`:""}`:y("inactiveStatus")]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-zinc-600",children:y("subMonthlyText")}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>h.push("/subscription/checkout"),children:"Assinar agora"}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:"Revisar benefícios e concluir compra"})]}),b?null:(0,t.jsx)(l.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",disabled:w,onClick:async()=>{try{T(!0);let a=await e.A(50131),t=x?.user?.email||x?.user?.name||void 0,s=await a.completePurchaseForTrip("global",t);if(s?.ok)N(y("purchaseSuccess"),{variant:"success"}),h.push("/calendar/final");else{let e=s?.error==="billing"?"Disponível no app Android. Instale via Google Play.":s?.error==="product"?"Produto não encontrado no Google Play.":s?.error==="purchase"?"Compra cancelada ou falhou.":s?.error==="token"?"Token de compra não recebido.":s?.error==="verify"?"Falha ao verificar a compra.":s?.error==="ack"?"Falha ao confirmar a compra.":s?.error==="store"?"Falha ao salvar assinatura.":y("purchaseFail");N(e,{variant:"error"})}}catch{N(y("purchaseError"),{variant:"error"})}finally{T(!1)}},children:S?`${y("subscribeMonthlyButton").split("(")[0].trim()} (${S}/m\xeas)`:y("subscribeMonthlyButton")}),u.Capacitor.isNativePlatform()||w?null:(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Para comprar, abra o app Android instalado via Google Play."})]})]}):(0,t.jsx)("div",{children:y("subscriptionNoTripHint")})})]})]}),(0,t.jsx)("div",{className:"container-page",children:(0,t.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Informações"})}),(0,t.jsxs)(i.CardContent,{className:"space-y-2 text-sm",children:[(0,t.jsx)("div",{children:y("planFreeBullet")}),(0,t.jsx)("div",{children:y("planPaidBullet")}),(0,t.jsx)("div",{children:y("validityBullet")}),(0,t.jsx)("div",{children:y("billingBullet")}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Assinaturas são geridas e cobradas pela Google Play Store. A renovação é automática, e você pode cancelar a qualquer momento nas configurações da Play Store."}),(0,t.jsx)("div",{children:y("legalBullet")})]})]})}),(0,t.jsx)("div",{className:"container-page",children:(0,t.jsxs)(i.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:y("deleteDataTitle")})}),(0,t.jsxs)(i.CardContent,{className:"space-y-2 text-sm",children:[(0,t.jsx)("div",{children:y("deleteDataDesc")}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:async()=>{try{let e=await fetch("/api/account/delete",{method:"POST"}),a=await e.json();a?.ok?N(y("deleteSuccess"),{variant:"success"}):N(y("deleteFail"),{variant:"error"})}catch{N(y("deleteError"),{variant:"error"})}},children:y("deleteDataButton")})]})]})})]})}e.s(["default",()=>h])},50131,e=>{e.v(a=>Promise.all(["static/chunks/48b9423674f6a5d1.js"].map(a=>e.l(a))).then(()=>a(46588)))}]);