(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9940,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(17255),i=e.i(74870),r=e.i(57688),l=e.i(33499),o=e.i(15288),s=e.i(19455),d=e.i(93479),c=e.i(76639),m=e.i(67489),u=e.i(73635),p=e.i(30826),h=e.i(76855),g=e.i(62071);function f(){let[e,f]=(0,a.useState)([]),[x,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),{data:$,status:j}=(0,n.useSession)(),{lang:N,t:w}=(0,l.useI18n)(),[k,S]=(0,a.useState)(null),{show:C}=(0,u.useToast)(),[I,M]=(0,a.useState)(!1),[T,z]=(0,a.useState)(""),[D,U]=(0,a.useState)(!1),[_,A]=(0,a.useState)(null),[R,E]=(0,a.useState)(""),[L,O]=(0,a.useState)(""),[F,P]=(0,a.useState)(null),[B,H]=(0,a.useState)(!1),[J,W]=(0,a.useState)(null),[G,K]=(0,a.useState)(!1),[q,Y]=(0,a.useState)(null),[Z,V]=(0,a.useState)(null),[X,Q]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(!1),[ea,en]=(0,a.useState)(!1),[ei,er]=(0,a.useState)(null),[el,eo]=(0,a.useState)(!1),[es,ed]=(0,a.useState)(null),[ec,em]=(0,a.useState)(!1),[eu,ep]=(0,a.useState)(!1),[eh,eg]=(0,a.useState)(null),[ef,ex]=(0,a.useState)(!1),[eb,ey]=(0,a.useState)(""),[ev,e$]=(0,a.useState)([]),[ej,eN]=(0,a.useState)("default"),[ew,ek]=(0,a.useState)(!1),[eS,eC]=(0,a.useState)([]),[eI,eM]=(0,a.useState)(null),[eT,ez]=(0,a.useState)(null),[eD,eU]=(0,a.useState)(""),[e_,eA]=(0,a.useState)(!1),[eR,eE]=(0,a.useState)(""),eL=(0,a.useRef)(new Set),eO=(0,a.useCallback)((e,t)=>{if(eL.current.has(e))return 0;eL.current.add(e);let a=C(e,t);try{setTimeout(()=>{try{eL.current.delete(e)}catch{}},15e3)}catch{}return a},[C]),eF=(0,a.useCallback)(()=>{try{let e=localStorage.getItem("calentrip:locConsent"),t="granted"===e?"granted":"denied"===e?"denied":"skipped"===e?"skipped":"default";if(eN(t),"default"===t)return ek(!0),!1;return"granted"===t}catch{return!1}},[]);function eP(e){let t=new URLSearchParams;t.set("lang",e.lang||"pt-BR"),t.set("currency",e.currency||"BRL"),e.date&&t.set("date",e.date),e.time&&t.set("time",e.time),e.passengers&&t.set("passengers",String(e.passengers)),e.originLat&&e.originLon&&(t.set("sLat",String(e.originLat)),t.set("sLng",String(e.originLon))),e.destLat&&e.destLon&&(t.set("dLat",String(e.destLat)),t.set("dLng",String(e.destLon)));let a=`https://www.rome2rio.com/s/${encodeURIComponent(e.originName)}/${encodeURIComponent(e.destName)}`,n=t.toString();return n?`${a}?${n}`:a}async function eB(e){if("flight"!==e.type)return;let t=e.meta;if(t&&t.origin&&t.date){Y({originIata:t.origin,departureDate:t.date,departureTime:t.departureTime||""}),K(!0),Q(!0);try{let e,a,n,i,r,l,o=await (0,g.findAirportByIata)(t.origin),s=o?`${o.name} (${o.iata})`:`${t.origin} airport`,d=await new Promise(e=>{(navigator.geolocation||e(null),eF())?navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,timeout:1e4}):e(null)}),c=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),n=await a.json();return n[0]?{lat:Number(n[0].lat),lon:Number(n[0].lon)}:null},m=await c(s);if(d&&m){let t={lat:d.coords.latitude,lon:d.coords.longitude},i=`https://router.project-osrm.org/route/v1/driving/${t.lon},${t.lat};${m.lon},${m.lat}?overview=false`,r=await fetch(i),l=await r.json(),o=l?.routes?.[0];o&&(e=Math.round((o.distance??0)/1e3),a=Math.round((o.duration??0)/60)),n=`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${t.lat}&pickup[longitude]=${t.lon}&dropoff[latitude]=${m.lat}&dropoff[longitude]=${m.lon}&dropoff[formatted_address]=${encodeURIComponent(s)}`}let u=d?`https://www.google.com/maps/dir/?api=1&origin=${d.coords.latitude}%2C${d.coords.longitude}&destination=${encodeURIComponent(s)}`:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(s)}`,p=eP({originName:d?`${d.coords.latitude},${d.coords.longitude}`:"my location",destName:s,originLat:d?.coords.latitude,originLon:d?.coords.longitude,destLat:m?.lat,destLon:m?.lon,date:t.date,time:t.departureTime,lang:"pt-BR",currency:"BRL"});!n&&m&&(n=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${m.lat}&dropoff[longitude]=${m.lon}&dropoff[formatted_address]=${encodeURIComponent(s)}`);let h=a?Math.round(1.3*a):void 0;if(t.departureTime&&t.date){let[e,n]=(t.departureTime||"00:00").split(":"),o=new Date(`${t.date}T${e.padStart(2,"0")}:${n.padStart(2,"0")}:00`),s=new Date(o.getTime()-108e5),d=(h??a??60)*6e4,c=new Date(s.getTime()-d),m=new Date(c.getTime()-72e5),u=e=>`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`;l=u(s),i=u(c),r=`${m.toLocaleDateString()} ${u(m)}`}V({distanceKm:e,durationMin:a,durationWithTrafficMin:h,gmapsUrl:u,r2rUrl:p,uberUrl:n,airportName:s,arrivalByTime:l,callTime:i,notifyAt:r})}catch{let e=q?.originIata?`${q.originIata} airport`:"aeroporto",t=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e)}`;V({distanceKm:void 0,durationMin:void 0,durationWithTrafficMin:void 0,gmapsUrl:t,r2rUrl:eP({originName:"Origem",destName:e,lang:"pt-BR",currency:"BRL"}),uberUrl:`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(e)}`,airportName:e});try{eO("Não foi possível calcular a rota detalhada. Usando links básicos.",{variant:"info"})}catch{}}finally{Q(!1)}}}async function eH(e){if("transport"!==e.type)return;let t=e.meta,a=(t.originAddress||"").trim(),n=(t.dep||"").trim();et(!0),en(!0);try{let i,r,l,o,s,d,c,m,u,p,h=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),n=await a.json();return n[0]?{lat:Number(n[0].lat),lon:Number(n[0].lon),display:n[0].display_name}:null},f=a?await h(a):null;eC([]),eM(null),ez(t.mode);let x=(t.originCity||"").trim();eU(x);let b=null;if(x){if("bus"===t.mode)try{let e=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=8`,a=await fetch(t,{headers:{Accept:"application/json"}});return(await a.json()).map(e=>({name:e.display_name,lat:Number(e.lat),lon:Number(e.lon)}))},t=await e(`rodovi\xe1ria ${x}`),a=await e(`bus station ${x}`),n=await e(`terminal \xf4nibus ${x}`),r=new Set,l=[];[...t,...a,...n].forEach(e=>{let t=`${Math.round(1e4*e.lat)}|${Math.round(1e4*e.lon)}`;r.has(t)||(r.add(t),l.push(e))});let o=x.toLowerCase(),s={"são paulo":["tietê","terminal tietê"],"sao paulo":["tiete","terminal tiete"],"rio de janeiro":["novo rio"],porto:["campo 24 de agosto"]},d=e=>{let t=(e||"").toLowerCase(),a=100;for(let e of(t.includes(o)&&(a-=10),/(central|centrale)/.test(t)&&(a-=15),/(rodovi|terminal|gare routière|autostazione)/.test(t)&&(a-=10),s[o]||[]))t.includes(e)&&(a-=40);return a};if(l.sort((e,t)=>d(e.name)-d(t.name)),l.length){eC(l.slice(0,6));let e=localStorage.getItem("calentrip:bus_station_selection"),t=(e?JSON.parse(e):{})[x],a=t?l.findIndex(e=>.001>Math.abs(e.lat-t.lat)&&.001>Math.abs(e.lon-t.lon)):-1,n=a>=0?l[a]:l[0];i=n.name,b={lat:n.lat,lon:n.lon},eM(a>=0?a:0)}}catch{}else if("train"===t.mode)try{let e=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=8`,a=await fetch(t,{headers:{Accept:"application/json"}});return(await a.json()).map(e=>({name:e.display_name,lat:Number(e.lat),lon:Number(e.lon)}))},t=await e(`esta\xe7\xe3o de trem ${x}`),a=await e(`train station ${x}`),n=await e(`gare ${x}`),r=new Set,l=[];[...t,...a,...n].forEach(e=>{let t=`${Math.round(1e4*e.lat)}|${Math.round(1e4*e.lon)}`;r.has(t)||(r.add(t),l.push(e))});let o=x.toLowerCase(),s={firenze:["santa maria novella","smn"],florence:["santa maria novella","smn"],roma:["termini"],rome:["termini"],milano:["centrale"],milan:["centrale","central"],venezia:["santa lucia"],venice:["santa lucia"],napoli:["centrale"],naples:["centrale"],torino:["porta nuova"],turin:["porta nuova"],bologna:["centrale"],pisa:["centrale"],paris:["gare du nord","gare de lyon"],berlin:["hauptbahnhof","hbf"],munich:["hauptbahnhof","hbf"],münchen:["hauptbahnhof","hbf"],madrid:["atocha"],barcelona:["sants"]},d=e=>{let t=(e||"").toLowerCase(),a=100;for(let e of(t.includes(o)&&(a-=20),/termini/.test(t)&&(a-=50),/(centrale|central|hauptbahnhof|hbf)/.test(t)&&(a-=40),/(santa maria novella|smn)/.test(t)&&(a-=45),/(gare du nord|gare de lyon)/.test(t)&&(a-=35),/(stazione|station|gare)/.test(t)&&(a-=10),s[o]||[]))t.includes(e)&&(a-=50);return a};if(l.sort((e,t)=>d(e.name)-d(t.name)),l.length){eC(l.slice(0,6));let e=localStorage.getItem("calentrip:train_station_selection"),t=(e?JSON.parse(e):{})[x],a=t?l.findIndex(e=>.001>Math.abs(e.lat-t.lat)&&.001>Math.abs(e.lon-t.lon)):-1,n=a>=0?l[a]:l[0];i=n.name,b={lat:n.lat,lon:n.lon},eM(a>=0?a:0)}}catch{}else if("air"===t.mode)try{let e=(await (0,g.searchAirportsAsync)(x)).filter(e=>e.city.toLowerCase()===x.toLowerCase()).slice(0,6),t={};e.forEach((e,a)=>{t[`${e.city} – ${e.name} (${e.iata})`]=a});let a=e.map(e=>`${e.city} – ${e.name} (${e.iata})`),n=[];for(let e of a)try{let a=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,i=await fetch(a,{headers:{Accept:"application/json"}}),r=(await i.json())[0];r&&n.push({name:r.display_name,lat:Number(r.lat),lon:Number(r.lon),pref:t[e]??999})}catch{}if(n.length){n.sort((e,t)=>(e.pref??999)-(t.pref??999));let e=n.map(e=>({name:e.name,lat:e.lat,lon:e.lon}));eC(e.slice(0,6));let t=localStorage.getItem("calentrip:airport_selection"),a=(t?JSON.parse(t):{})[x],r=a?e.findIndex(e=>.001>Math.abs(e.lat-a.lat)&&.001>Math.abs(e.lon-a.lon)):-1,l=r>=0?e[r]:e[0];i=l.name,b={lat:l.lat,lon:l.lon},eM(r>=0?r:0)}}catch{}}let y=b?{lat:b.lat,lon:b.lon,display:i||n}:await h(n+(t.originCity?` ${t.originCity}`:""));if(y){let e=await new Promise(e=>{try{if(!eF())return void e(null);navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4})}catch{e(null)}});if(e){let t={lat:e.coords.latitude,lon:e.coords.longitude},a=`https://router.project-osrm.org/route/v1/driving/${t.lon},${t.lat};${y.lon},${y.lat}?overview=false`,i=await fetch(a),c=await i.json(),m=c?.routes?.[0];m&&(r=Math.round((m.distance??0)/1e3),l=Math.round((m.duration??0)/60));try{let e=`https://router.project-osrm.org/route/v1/walking/${t.lon},${t.lat};${y.lon},${y.lat}?overview=false`,a=await fetch(e),n=await a.json(),i=n?.routes?.[0];i&&(o=Math.round((i.duration??0)/60))}catch{}s=`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${t.lat}&pickup[longitude]=${t.lon}&dropoff[latitude]=${y.lat}&dropoff[longitude]=${y.lon}&dropoff[formatted_address]=${encodeURIComponent(n)}`,d=`https://www.google.com/maps/dir/?api=1&origin=${t.lat}%2C${t.lon}&destination=${encodeURIComponent(n)}`}else s=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${y?.lat}&dropoff[longitude]=${y?.lon}&dropoff[formatted_address]=${encodeURIComponent(n)}`,d=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(n)}`;if(f&&y){let e=[Math.min(f.lon,y.lon),Math.min(f.lat,y.lat),Math.max(f.lon,y.lon),Math.max(f.lat,y.lat)];m=`https://www.openstreetmap.org/export/embed.html?bbox=${e.join("%2C")}&layer=mapnik`}c=`https://www.rome2rio.com/s/${encodeURIComponent(a)}/${encodeURIComponent(n)}`}let v=l?Math.round(1.3*l):void 0;if(e.date&&e.time){let[t,a]=(e.time||"00:00").split(":"),n=new Date(`${e.date}T${t.padStart(2,"0")}:${a.padStart(2,"0")}:00`),i=((v??l??30)+60)*6e4,r=new Date(n.getTime()-i),o=new Date(r.getTime()),s=e=>`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`;u=s(r),p=`${o.toLocaleDateString()} ${s(o)}`}er({origin:a,destination:n,distanceKm:r,drivingMin:v??l,walkingMin:o,busMin:v?Math.round(1.8*v):void 0,trainMin:v?Math.round(1.2*v):void 0,uberUrl:s,gmapsUrl:d,r2rUrl:c,mapUrl:m,callTime:u,notifyAt:p})}catch{let e=`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(a)}&destination=${encodeURIComponent(n)}`,t=`https://www.rome2rio.com/s/${encodeURIComponent(a)}/${encodeURIComponent(n)}`,i=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(n)}`;er({origin:a,destination:n,gmapsUrl:e,r2rUrl:t,uberUrl:i});try{C("Erro ao calcular rota detalhada. Usando links básicos.",{variant:"info"})}catch{}}finally{en(!1)}}async function eJ(e){if("stay"!==e.type)return;let t=e.meta;if(!t||"checkin"!==t.kind)return;eo(!0),ed(null);let a=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),n=await a.json();return n[0]?{lat:Number(n[0].lat),lon:Number(n[0].lon),display:n[0].display_name}:null},n=await a(t.address||t.city||"");if(!n){let e=(t.address||t.city||"").trim(),a=e?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`:void 0,n=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent((t.address||t.city||"").trim())}`;ed({city:t.city,address:t.address,gmapsUrl:a,uberUrl:n});try{eO("Destino não geocodificado. Usando busca genérica.",{variant:"info"})}catch{}return}try{let e,a,i,r,l,o,s,d=await new Promise(e=>{try{if(!eF())return void e(null);navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4})}catch{e(null)}});if(!d){let e=(t.address||t.city||"").trim(),a=e?`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e)}`:void 0,i=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${n.lat}&dropoff[longitude]=${n.lon}&dropoff[formatted_address]=${encodeURIComponent(e)}`;ed({city:t.city,address:t.address,gmapsUrl:a,uberUrl:i});try{eO("Sem localização atual. Links básicos foram gerados.",{variant:"info"})}catch{}return}let c={lat:d.coords.latitude,lon:d.coords.longitude},m=`https://router.project-osrm.org/route/v1/driving/${c.lon},${c.lat};${n.lon},${n.lat}?overview=false`,u=await fetch(m),p=await u.json(),h=p?.routes?.[0],g=h?Math.round((h.duration??0)/60):void 0,f=`https://router.project-osrm.org/route/v1/walking/${c.lon},${c.lat};${n.lon},${n.lat}?overview=false`;try{let t=await fetch(f),a=await t.json(),n=a?.routes?.[0];e=n?Math.round((n.duration??0)/60):void 0}catch{}let x=g?Math.round(1.3*g):void 0,b=x?Math.round(1.8*x):void 0,y=x?Math.round(1.2*x):void 0,v=(t.address||t.city||"").trim(),$=`https://www.google.com/maps/dir/?api=1&origin=${c.lat}%2C${c.lon}&destination=${encodeURIComponent(v)}`,j=`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${c.lat}&pickup[longitude]=${c.lon}&dropoff[latitude]=${n.lat}&dropoff[longitude]=${n.lon}&dropoff[formatted_address]=${encodeURIComponent(v)}`,N=(i=(a=e=>e*Math.PI/180)(n.lat-c.lat),r=a(n.lon-c.lon),l=a(c.lat),o=a(n.lat),s=Math.sin(i/2)**2+Math.cos(l)*Math.cos(o)*Math.sin(r/2)**2,Math.round(12742*Math.asin(Math.sqrt(s)))),w=Math.round(6*(N||0)+3);ed({city:t.city,address:t.address,distanceKm:N,walkingMin:e,drivingMin:x??g,busMin:b,trainMin:y,priceEstimate:w,uberUrl:j,gmapsUrl:$})}catch{let e=(t.address||t.city||"").trim(),a=e?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`:void 0,n=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(e)}`;ed({city:t.city,address:t.address,gmapsUrl:a,uberUrl:n});try{eO("Erro ao calcular rota. Usando links básicos.",{variant:"info"})}catch{}}}async function eW(e){if("activity"!==e.type&&"restaurant"!==e.type)return;let t=e.meta;em(!0),ep(!0);try{let e,a,n,i,r,l,o,s=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),n=await a.json();return n[0]?{lat:Number(n[0].lat),lon:Number(n[0].lon),display:n[0].display_name}:null},d=`${t.address||`${t.title} ${t.cityName}`}`.trim(),c=await s(d),m=await new Promise(e=>{(navigator.geolocation||e(null),eF())?navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4}):e(null)});if(c&&m){let t={lat:m.coords.latitude,lon:m.coords.longitude},s=`https://router.project-osrm.org/route/v1/driving/${t.lon},${t.lat};${c.lon},${c.lat}?overview=false`,u=await fetch(s),p=await u.json(),h=p?.routes?.[0];h&&(a=Math.round((h.duration??0)/60),o=Math.round((h.distance??0)/1e3));try{let a=`https://router.project-osrm.org/route/v1/walking/${t.lon},${t.lat};${c.lon},${c.lat}?overview=false`,n=await fetch(a),i=await n.json(),r=i?.routes?.[0];r&&(e=Math.round((r.duration??0)/60))}catch{}let g=a?Math.round(1.3*a):void 0;r=g?Math.round(1.8*g):void 0,l=g?Math.round(1.2*g):void 0;let f=Math.round(6*(o||0)+3);n=`https://www.google.com/maps/dir/?api=1&origin=${t.lat}%2C${t.lon}&destination=${encodeURIComponent(d)}`,i=`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${t.lat}&pickup[longitude]=${t.lon}&dropoff[latitude]=${c.lat}&dropoff[longitude]=${c.lon}&dropoff[formatted_address]=${encodeURIComponent(d)}`,eg({destination:d,distanceKm:o,walkingMin:e,drivingMin:g??a,busMin:r,trainMin:l,priceEstimate:f,uberUrl:i,gmapsUrl:n})}else if(c&&!m){n=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(d)}`,i=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${c.lat}&dropoff[longitude]=${c.lon}&dropoff[formatted_address]=${encodeURIComponent(d)}`,eg({destination:d,gmapsUrl:n,uberUrl:i});try{C("Sem localização atual. Links básicos foram gerados.",{variant:"info"})}catch{}}else{n=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d)}`,i=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(d)}`,eg({destination:d,gmapsUrl:n,uberUrl:i});try{eO("Destino não geocodificado. Usando busca genérica.",{variant:"info"})}catch{}}}catch{let t=`${e.meta.title} ${e.meta.cityName}`.trim(),a=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`,n=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(t)}`;eg({destination:t,gmapsUrl:a,uberUrl:n});try{eO("Erro ao calcular rota. Usando links básicos.",{variant:"info"})}catch{}}finally{ep(!1)}}async function eG(){try{let e=await (0,p.getSavedTrips)(),t=null;try{let a=sessionStorage.getItem("calentrip:tripSearch")||localStorage.getItem("calentrip:tripSearch"),n=a?JSON.parse(a):null;if(n){let a,i="same"===n.mode,r=i?n.origin:n.outbound?.origin,l=i?n.destination:n.outbound?.destination,o=i?n.departDate:n.outbound?.date,s=(a=n.passengers||{},Number(a.adults||0)+Number(a.children||0)+Number(a.infants||0)),d=r&&l?`${r} → ${l}`:"";t=e.find(e=>e.title===d&&e.date===o&&Number(e.passengers||0)===s)||null}}catch{}if(!t){let a=e.filter(e=>e.reachedFinalCalendar);t=a.length?a[a.length-1]:e.length?e[0]:null}let a=[];if(t){let e=await (0,p.getTripEvents)(t.id);e.length?e.forEach(e=>a.push({type:e.type||"activity",label:e.label||e.name,date:e.date,time:e.time})):a.push({type:"flight",label:t.title,date:t.date})}let n=localStorage.getItem("calentrip_trip_summary"),i=n?JSON.parse(n):null,r=Array.isArray(i?.cities)?i.cities:[];r.forEach((e,t)=>{let n=e.name||`${w("cityGeneric")} ${t+1}`,i=e.address||w("addressNotProvided");e.checkin&&a.push({type:"stay",label:`${w("checkinLabel")} ${w("accommodationDialogTitle")}: ${n} • ${w("addressWord")}: ${i}`,date:e.checkin,time:"14:00",meta:{city:n,address:i,kind:"checkin"}}),e.checkout&&a.push({type:"stay",label:`${w("checkoutLabel")} ${w("accommodationDialogTitle")}: ${n} • ${w("addressWord")}: ${i}`,date:e.checkout,time:"11:00",meta:{city:n,address:i,kind:"checkout"}})});for(let e=0;e<r.length-1;e++){let t=r[e],n=r[e+1],i=t.transportToNext;if(i){let r=`Transporte: ${t.name||`Cidade ${e+1}`} → ${n?.name||`Cidade ${e+2}`} • ${(i.mode||"").toUpperCase()}`,l=t.checkout||n?.checkin||"",o=i.depTime||"11:00";a.push({type:"transport",label:r,date:l,time:o,meta:{...i,originAddress:t.address,originCity:t.name}})}}let l=localStorage.getItem("calentrip:entertainment:records");((l?JSON.parse(l):[])||[]).forEach(e=>a.push({type:e.kind,label:"activity"===e.kind?`Atividade: ${e.title} (${e.cityName})`:`Restaurante: ${e.title} (${e.cityName})`,date:e.date,time:e.time,meta:e}));let o=new Set,s=a.filter(e=>{let t="stay"===e.type?`${e.type}|${e.label}|${(e.date||"").trim()}`:`${e.type}|${e.label}|${(e.date||"").trim()}|${(e.time||"").trim()}`;return!o.has(t)&&(o.add(t),!0)});f(s),C(w("storageReloadedMsg"),{variant:"success"})}catch{C(w("storageReloadErrorMsg"),{variant:"error"})}}async function eK(){function t(e){let t=String(e.getUTCFullYear()),a=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),r=String(e.getUTCMinutes()).padStart(2,"0");return`${t}${a}${n}T${i}${r}00Z`}function a(e){let t=String(e.getFullYear()),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return`${t}${a}${n}T${i}${r}00`}function n(e){return e.replace(/\\/g,"\\\\").replace(/\r?\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,")}function i(e,t=320){return e&&e.length>t?e.slice(0,t-1)+"…":e}let r=(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"Etc/UTC"}catch{return"Etc/UTC"}})(),l="undefined"!=typeof navigator&&navigator.userAgent||"",o=/Android/.test(l),s=!o,d=[];if(d.push("BEGIN:VCALENDAR"),d.push("VERSION:2.0"),d.push("PRODID:-//CalenTrip//Calendar Export//PT"),d.push("CALSCALE:GREGORIAN"),d.push("METHOD:PUBLISH"),d.push("X-WR-CALNAME:CalenTrip"),s){d.push(`X-WR-TIMEZONE:${r}`);let e=-new Date().getTimezoneOffset(),t=Math.abs(e),a=String(Math.floor(t/60)).padStart(2,"0"),n=String(t%60).padStart(2,"0"),i=`${e>=0?"+":"-"}${a}${n}`;d.push("BEGIN:VTIMEZONE"),d.push(`TZID:${r}`),d.push("BEGIN:STANDARD"),d.push("DTSTART:19700101T000000"),d.push(`TZOFFSETFROM:${i}`),d.push(`TZOFFSETTO:${i}`),d.push("END:STANDARD"),d.push("END:VTIMEZONE")}e.forEach((e,l)=>{var c;let m,u,p=(c=e.date,m=(e.time||"00:00").padStart(5,"0"),Number.isNaN((u=new Date(`${(c||"").replace(/\//g,"-")}T${m}:00`)).getTime())?null:u),g=p?new Date(p.getTime()+36e5):null,f=o?i(e.label,64):i(e.label,120),x=o?function(e){try{return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g," ").replace(/\s+/g," ").trim()}catch{return e.replace(/[^\x20-\x7E]/g," ").replace(/\s+/g," ").trim()}}(f):f,b=o?i(e.label,160):i(e.label,280);d.push("BEGIN:VEVENT");let y=`month-${l}-${p?a(p):String(Date.now())}@calentrip`;for(let i of(p&&d.push(s?`DTSTART;TZID=${r}:${a(p)}`:`DTSTART:${t(p)}`),g&&d.push(s?`DTEND;TZID=${r}:${a(g)}`:`DTEND:${t(g)}`),d.push(`DTSTAMP:${t(new Date)}`),d.push(`UID:${y}`),d.push(`SUMMARY:${n(x)}`),d.push("TRANSP:OPAQUE"),d.push("SEQUENCE:0"),d.push("STATUS:CONFIRMED"),d.push(`DESCRIPTION:${n(b)}`),(0,h.alarmForEvent)(e.type,!!(e.time&&e.time.trim()),p)))d.push(i);d.push("END:VEVENT")}),d.push("END:VCALENDAR");let c=d.map(function(e){if(e.length<=74)return e;let t=[];for(let a=0;a<e.length;a+=74)t.push(e.slice(a,a+74));return t.join("\r\n ")}).join("\r\n")+"\r\n",m=new Blob([c],{type:"text/calendar;charset=utf-8"}),u=new File([c],"calentrip.ics",{type:"text/calendar;charset=utf-8"});try{let e=navigator;if(void 0!==e&&"function"==typeof e.canShare&&e.canShare({files:[u]})&&"function"==typeof e.share){await e.share({files:[u],title:"CalenTrip"});let t="undefined"!=typeof navigator&&navigator.userAgent||"",a=/iPad|iPhone|iPod/.test(t)||t.includes("Macintosh")&&"ontouchend"in window,n=/Android/.test(t);a?C(w("iosCalendarSentMsg"),{variant:"success"}):n?C(w("androidCalendarSentMsg"),{variant:"success"}):C(w("systemCalendarSentMsg"),{variant:"success"});return}}catch{}let p=URL.createObjectURL(m),g=document.createElement("a");g.href=p,g.download="calentrip.ics",document.body.appendChild(g),g.click(),g.remove(),URL.revokeObjectURL(p),C(w("icsDownloadedMsg"),{variant:"info"})}(0,a.useEffect)(()=>{(async()=>{try{await (0,p.migrateFromLocalStorage)()}catch{}})()},[]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem("calentrip:auto_load_saved"),t=localStorage.getItem("calentrip:saved_calendar");if("1"===e&&t){let e=JSON.parse(t);if(e?.events&&e.events.length){let t=e.events.map(e=>{if("stay"===e.type){let t=e.meta?.kind,a="checkin"===t?"14:00":"checkout"===t?"11:00":e.time||void 0;return{...e,time:a}}return e});f(t),H(!0),S(null)}try{localStorage.removeItem("calentrip:auto_load_saved")}catch{}}}catch{}},[]),(0,a.useEffect)(()=>{(async()=>{try{if(B)return;let e=await (0,p.getSavedTrips)(),t=null;try{let a=sessionStorage.getItem("calentrip:tripSearch")||localStorage.getItem("calentrip:tripSearch"),n=a?JSON.parse(a):null;if(n){let a,i="same"===n.mode,r=i?n.origin:n.outbound?.origin,l=i?n.destination:n.outbound?.destination,o=i?n.departDate:n.outbound?.date,s=(a=n.passengers||{},Number(a.adults||0)+Number(a.children||0)+Number(a.infants||0)),d=r&&l?`${r} → ${l}`:"";t=e.find(e=>e.title===d&&e.date===o&&Number(e.passengers||0)===s)||null}}catch{}if(!t){let a=e.filter(e=>e.reachedFinalCalendar);t=a.length?a[a.length-1]:e.length?e[0]:null}if(t){let e=(0,i.isTripPremium)(t.id);M(e),P(t.id);try{let e=localStorage.getItem("calentrip:premium"),t=(e?JSON.parse(e):[]).find(e=>"global"===e.tripId&&e.expiresAt>Date.now());if(t){let e=new Date(t.expiresAt),a=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");z(`${a}/${n}`)}else z("")}catch{z("")}"authenticated"!==j?S({show:!0,reason:"anon"}):e?S(null):S({show:!0,reason:"noPremium"})}let a=t?await (0,p.getTripEvents)(t.id):[];if(a.length){let e=a.map(e=>{let t=e.type||"activity",a=e.label||e.name,n=e.time;if("stay"===t){let e=(a||"").toLowerCase().includes("check-in"),t=(a||"").toLowerCase().includes("checkout");n=e?"14:00":t?"11:00":n}return{type:t,label:a,date:e.date,time:n}});if(B)return;f(e),S(null);return}let n=[];(t?[t]:e).forEach(e=>{e.flightNotes&&e.flightNotes.length?e.flightNotes.forEach(e=>{let t="outbound"===e.leg?w("outboundFlight"):w("inboundFlight");if(n.push({type:"flight",label:`${t}: ${e.origin} → ${e.destination}`,date:e.date,time:e.departureTime||void 0,meta:e}),e.arrivalTime){let t=e.arrivalNextDay?((e,t)=>{let a=new Date(`${e}T00:00:00`);if(Number.isNaN(a.getTime()))return e;a.setDate(a.getDate()+1);let n=e=>String(e).padStart(2,"0");return`${a.getFullYear()}-${n(a.getMonth()+1)}-${n(a.getDate())}`})(e.date,0):e.date,a="outbound"===e.leg?w("arrivalOutboundLabel"):w("arrivalInboundLabel");n.push({type:"flight",label:`${a}: ${e.destination}`,date:t,time:e.arrivalTime||void 0,meta:e})}}):n.push({type:"flight",label:e.title,date:e.date})});let r=localStorage.getItem("calentrip_trip_summary"),l=r?JSON.parse(r):null,o=Array.isArray(l?.cities)?l.cities:[];o.forEach((e,t)=>{let a=e.name||`${w("cityGeneric")} ${t+1}`,i=e.address||w("addressNotProvided");e.checkin&&n.push({type:"stay",label:`${w("checkinLabel")} ${w("accommodationDialogTitle")}: ${a} • ${w("addressWord")}: ${i}`,date:e.checkin,time:"14:00",meta:{city:a,address:i,kind:"checkin"}}),e.checkout&&n.push({type:"stay",label:`${w("checkoutLabel")} ${w("accommodationDialogTitle")}: ${a} • ${w("addressWord")}: ${i}`,date:e.checkout,time:"11:00",meta:{city:a,address:i,kind:"checkout"}})});for(let e=0;e<o.length-1;e++){let t=o[e],a=o[e+1],i=t.transportToNext;if(i){let r=`${w("transport")}: ${t.name||`${w("cityGeneric")} ${e+1}`} → ${a?.name||`${w("cityGeneric")} ${e+2}`} • ${(i.mode||"").toUpperCase()}`,l=t.checkout||a?.checkin||"",o=i.depTime||"11:00";n.push({type:"transport",label:r,date:l,time:o,meta:{...i,originAddress:t.address,originCity:t.name}})}}let s=localStorage.getItem("calentrip:entertainment:records");((s?JSON.parse(s):[])||[]).forEach(e=>n.push({type:e.kind,label:"activity"===e.kind?`${w("activityWord")}: ${e.title} (${e.cityName})`:`${w("restaurantWord")}: ${e.title} (${e.cityName})`,date:e.date,time:e.time,meta:e}));let d=new Set,c=n.filter(e=>{let t="stay"===e.type?`${e.type}|${e.label}|${(e.date||"").trim()}`:`${e.type}|${e.label}|${(e.date||"").trim()}|${(e.time||"").trim()}`;return!d.has(t)&&(d.add(t),!0)});if(B)return;f(c)}catch{}})()},[j,B,w]),(0,a.useEffect)(()=>{(async()=>{try{let e,t=sessionStorage.getItem("calentrip:tripSearch")||localStorage.getItem("calentrip:tripSearch"),a=t?JSON.parse(t):null;if(!a)return;let n="same"===a.mode,i=n?a.origin:a.outbound?.origin,r=n?a.destination:a.outbound?.destination,l=n?a.departDate:a.outbound?.date,o=(e=a.passengers||{},Number(e.adults||0)+Number(e.children||0)+Number(e.infants||0));if(!i||!r||!l)return;let s=`${i} → ${r}`,d=await (0,p.getSavedTrips)(),c=d.findIndex(e=>e.title===s&&e.date===l&&e.passengers===o);if(c<0)return;await (0,p.updateTrip)(d[c].id,{reachedFinalCalendar:!0})}catch{}})()},[]);let eq=(0,a.useMemo)(()=>{let t={};return e.forEach(e=>{if(e.date){let a=e.date;(t[a]||=[]).push(e)}}),Object.keys(t).forEach(e=>t[e].sort((e,t)=>(e.time||"00:00").localeCompare(t.time||"00:00"))),t},[e]),eY=(0,a.useMemo)(()=>{let t=e.map(e=>e.date).filter(Boolean).sort()[0]||new Date().toISOString().slice(0,10),a=new Date(`${t}T00:00:00`);return new Date(a.getFullYear(),a.getMonth(),1)},[e]),eZ=(0,a.useMemo)(()=>{let t=new Set;return e.forEach(e=>{"flight"===e.type&&e.date&&t.add(e.date)}),t},[e]),eV=(0,a.useMemo)(()=>{let e="pt"===N?"pt-BR":"es"===N?"es-ES":"en-US";return new Intl.DateTimeFormat(e,{month:"long",year:"numeric"}).format(eY)},[eY,N]),eX=(0,a.useMemo)(()=>{let e=eY.getFullYear(),t=eY.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0),i=[];for(let a=1;a<=n.getDate();a++){let n=new Date(e,t,a),r=`${String(n.getFullYear())}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,l=!!eq[r];i.push({date:r,label:String(a),enabled:l})}return[...Array.from({length:(a.getDay()+6)%7},()=>({date:"",label:"",enabled:!1})),...i]},[eY,eq]),eQ=(0,a.useMemo)(()=>{if(!y)return w("dayActivitiesLabel");let e="pt"===N?"pt-BR":"es"===N?"es-ES":"en-US",t=new Date(`${y}T00:00:00`);if(Number.isNaN(t.getTime()))return w("dayActivitiesLabel");let a=String(t.getDate()),n=new Intl.DateTimeFormat(e,{weekday:"long"}).format(t);return`${w("dayActivitiesLabel")}: ${a} • ${n}`},[y,N,w]);function e0(e){if(!y)return;let t=new Date(`${y}T00:00:00`);if(Number.isNaN(t.getTime()))return;let a=eY.getFullYear(),n=eY.getMonth(),i=new Date(t);if(i.setDate(i.getDate()+e),i.getFullYear()!==a||i.getMonth()!==n)return;let r=e=>String(e).padStart(2,"0");v(`${i.getFullYear()}-${r(i.getMonth()+1)}-${r(i.getDate())}`)}return(0,t.jsxs)("div",{className:"min-h-screen pl-14 pr-4 py-6 space-y-6",children:[k?.show?(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl p-5 space-y-3",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:"anon"===k.reason?w("loginUnlockTitle"):w("subscriptionNeededTitle")}),(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:"anon"===k.reason?(0,t.jsx)("div",{children:w("loginUnlockText")}):(0,t.jsx)("div",{children:w("subMonthlyText")})}),(0,t.jsx)("div",{className:"flex gap-2 mt-2",children:"anon"===k.reason?(0,t.jsx)("button",{type:"button",className:"btn",onClick:()=>(0,n.signIn)("google",{callbackUrl:"/profile",redirect:!0}),children:"Entrar com Google"}):(0,t.jsx)("button",{type:"button",className:"btn",onClick:()=>{try{window.location.href="/profile"}catch{}},children:w("subscribeMonthlyButton")})})]})}):null,(0,t.jsxs)("div",{className:x?"fixed left-0 top-0 bottom-0 z-40 w-56 border-r border-zinc-200 bg-white dark:border-zinc-800 dark:bg-black transition-all":"fixed left-0 top-0 bottom-0 z-40 w-14 border-r border-zinc-200 bg-white dark:border-zinc-800 dark:bg-black transition-all",children:[(0,t.jsx)("div",{className:"h-14 flex items-center justify-center border-b border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)("button",{type:"button",className:"rounded-md p-2",onClick:()=>b(e=>!e),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[24px]",children:"menu"})})}),(0,t.jsxs)("div",{className:"p-2 space-y-2",children:[(0,t.jsx)("div",{className:"rounded-md border border-zinc-200 dark:border-zinc-800 p-2",children:"authenticated"===j?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[$?.user?.image?(0,t.jsx)(r.default,{src:$.user.image,alt:"avatar",width:32,height:32,className:"h-8 w-8 rounded-full object-cover"}):(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black text-xs",children:($?.user?.name||$?.user?.email||"PF").slice(0,2).toUpperCase()}),x?(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:$?.user?.name||"Usuário"}),(0,t.jsx)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:$?.user?.email||""}),(0,t.jsxs)("div",{className:"mt-1 text-[10px] text-zinc-500",children:[w("planWord"),": ",I?`${w("premiumWord")}${T?` ${w("untilWord")} ${T}`:""}`:w("freeWord")]})]}):null]}):(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black text-xs",children:"PF"}),x?(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Entrar"}),(0,t.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,t.jsx)("button",{type:"button",className:"text-xs",onClick:()=>(0,n.signIn)("google",{callbackUrl:"/profile",redirect:!0}),children:w("signInWithGoogle")})})]}):null]})}),(0,t.jsxs)("button",{type:"button",className:"flex w-full items-center gap-3 rounded-md px-3 h-10 hover:bg-zinc-50 dark:hover:bg-zinc-900",onClick:()=>{try{localStorage.setItem("calentrip:saved_calendar",JSON.stringify({events:e})),localStorage.setItem("calentrip:auto_load_saved","1")}catch{}try{window.location.href="/calendar/final"}catch{}},children:[(0,t.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[22px] text-[#007AFF]",children:"list_alt"})}),x?(0,t.jsx)("span",{className:"text-sm font-medium",children:w("calendarList")}):null]}),(0,t.jsxs)("button",{type:"button",className:"flex w-full items-center gap-3 rounded-md px-3 h-10 hover:bg-zinc-50 dark:hover:bg-zinc-900",onClick:eG,children:[(0,t.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[22px] text-[#007AFF]",children:"refresh"})}),x?(0,t.jsx)("span",{className:"text-sm font-medium",children:w("reloadStorageButton")}):null]}),(0,t.jsxs)("button",{type:"button",className:"flex w-full items-center gap-3 rounded-md px-3 h-10 hover:bg-zinc-50 dark:hover:bg-zinc-900",onClick:()=>{eE(""),eA(!0)},disabled:!I,children:[(0,t.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[22px] text-[#007AFF]",children:"bookmark_add"})}),x?(0,t.jsx)("span",{className:"text-sm font-medium",children:w("saveCalendarButton")}):null]})]})]}),x?(0,t.jsx)("div",{className:"fixed top-0 right-0 bottom-0 left-56 z-30 bg-black/10",onClick:()=>b(!1)}):null,(0,t.jsxs)("div",{className:"container-page",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-30 -mt-4 mb-2 px-3 py-2 bg-white/80 dark:bg-black/60 backdrop-blur border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-end gap-2",children:[(0,t.jsxs)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md",onClick:()=>{try{localStorage.setItem("calentrip:saved_calendar",JSON.stringify({events:e})),localStorage.setItem("calentrip:auto_load_saved","1")}catch{}try{window.close()}catch{}try{window.location.href="/calendar/final"}catch{}},children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"list_alt"}),w("backToListButton")]}),(0,t.jsxs)(s.Button,{type:"button",className:"px-2 py-1 text-xs rounded-md",onClick:eK,children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"download"}),w("exportIcsButton")]})]}),(0,t.jsx)("h1",{className:"mb-1 text-2xl font-semibold text-[var(--brand)]",children:w("tripCalendarTitle")}),(0,t.jsx)("div",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:eV}),(0,t.jsxs)("div",{className:"mt-2 flex items-start gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[18px] text-[#febb02]",children:"sticky_note_2"}),(0,t.jsx)("span",{children:w("monthHelpText")})]})]}),(0,t.jsxs)("div",{className:"container-page",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-3 text-xs",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#007AFF]"}),(0,t.jsx)("span",{children:w("flightWord")})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#febb02]"}),(0,t.jsx)("span",{children:w("accommodationDialogTitle")})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#34c759]"}),(0,t.jsx)("span",{children:w("activitiesWord")})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsx)(o.CardTitle,{children:w("sameTripLabel")})}),(0,t.jsx)(o.CardContent,{children:(0,t.jsx)("div",{className:"grid grid-cols-7 gap-2 text-sm",children:eX.map((e,a)=>{let n=!!(e.date&&eZ.has(e.date)),i=!!e.enabled&&!!e.date,r=e.date?`h-10 rounded relative${i?" border-2 border-[#febb02]":" border border-zinc-200 dark:border-zinc-800"}${n?" bg-[#007AFF] text-white":i?" hover:bg-zinc-50 dark:hover:bg-zinc-900":" text-zinc-400"}`:"h-10 rounded border border-transparent",l=e.date&&eq[e.date]?Array.from(new Set(eq[e.date].map(e=>e.type))):[];return(0,t.jsxs)("button",{type:"button",disabled:!e.date||!i,className:r,onClick:()=>v(e.date),children:[e.label,l.length?(0,t.jsxs)("div",{className:"absolute right-1 bottom-1 flex gap-1",children:[l.includes("flight")?(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#007AFF]"}):null,l.includes("stay")?(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#febb02]"}):null,l.includes("activity")||l.includes("restaurant")?(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#34c759]"}):null,l.includes("transport")?(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#007AFF]"}):null]}):null]},`d-${a}`)})})})]})]}),y&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>v(null)}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",onTouchStart:e=>W({x:e.touches[0].clientX,y:e.touches[0].clientY}),onTouchEnd:e=>{if(!J)return;let t=e.changedTouches[0].clientX-J.x,a=e.changedTouches[0].clientY-J.y;Math.abs(t)>50&&Math.abs(t)>Math.abs(a)&&(t<0?e0(1):e0(-1)),W(null)},children:[(0,t.jsx)(c.DialogHeader,{children:eQ}),(0,t.jsxs)("div",{className:"space-y-3 text-sm max-h-[65vh] overflow-y-auto",children:[eq[y]&&eq[y].length?(0,t.jsx)("div",{className:"grid grid-cols-[56px_1fr] gap-x-3",children:(()=>{let e=e=>{let t=Number((e||"00:00").padStart(5,"0").slice(0,2));return Number.isFinite(t)?t:0},a=eq[y].slice().sort((e,t)=>(e.time||"00:00").localeCompare(t.time||"00:00")),n=Math.max(0,Math.min(...a.map(t=>e(t.time)),8)),i=Math.min(23,Math.max(...a.map(t=>e(t.time)),18)),r=Math.min(n,7),l=Math.max(i,21),o=[];for(let e=r;e<=l;e++)o.push(e);return o.flatMap((n,i)=>{let r=`${String(n).padStart(2,"0")}:00`,l=a.filter(t=>e(t.time)===n);return[(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:r},`hl-${i}`),(0,t.jsx)("div",{className:"space-y-2",children:l.length?l.map((e,a)=>{let n="flight"===e.type?"local_airport":"transport"===e.type?"transfer_within_a_station":"stay"===e.type?"home":"event",r="flight"===e.type||"transport"===e.type?"border-l-[#007AFF]":"stay"===e.type?"border-l-[#febb02]":"border-l-[#34c759]",l="activity"===e.type||"restaurant"===e.type,o=(e.time||"00:00").padStart(5,"0");return(0,t.jsxs)("div",{className:`rounded-lg border border-zinc-200 bg-white p-3 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 flex items-start justify-between gap-3 border-l-4 ${r}`,children:[(0,t.jsxs)("div",{className:"leading-relaxed",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:n}),(0,t.jsx)("span",{children:o})]}),(0,t.jsx)("div",{className:"mt-1 text-sm",children:e.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:["flight"===e.type?(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>eB(e),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"local_taxi"})}):null,"transport"===e.type?(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>eH(e),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px] text-[#febb02]",children:"map"})}):null,"stay"===e.type&&e.meta?.kind==="checkin"?(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>eJ(e),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"home"})}):null,l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Button,{type:"button",variant:"outline",disabled:!I,className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>{A(a),E(e.date),O(e.time||""),U(!0)},children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"edit"}),(0,t.jsx)("span",{children:w("editLabel")})]}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>eW(e),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"directions_car"})}),(e.meta?.files||[]).length?(0,t.jsxs)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md gap-1",onClick:()=>{let t=e.meta;ey(t.title),e$(t.files||[]),ex(!0)},children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"description"}),(0,t.jsx)("span",{children:"Docs"})]}):null]}):null]})]},`ev-${i}-${a}`)}):(0,t.jsx)("div",{className:"h-7"})},`hc-${i}`)]})})()}):(0,t.jsx)("div",{className:"text-zinc-600",children:"Sem eventos neste dia."}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"px-2 py-1 text-xs rounded-md",onClick:()=>{try{localStorage.setItem("calentrip:saved_calendar",JSON.stringify({events:e})),localStorage.setItem("calentrip:auto_load_saved","1")}catch{}try{window.location.href="/calendar/final"}catch{}},children:"Calendário em lista"}),(0,t.jsx)(s.Button,{type:"button",className:"px-2 py-1 text-xs rounded-md",onClick:()=>v(null),children:w("close")})]})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{children:[D?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>U(!1)}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:w("editActivityTitle")}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Data"}),(0,t.jsx)(d.Input,{type:"date",value:R,onChange:e=>E(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Hora"}),(0,t.jsx)(d.Input,{type:"time",value:L,onChange:e=>O(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>{try{if(null===_)return;let e=eq[y].map((e,t)=>t);f(t=>t.filter(a=>!(a.date===y&&e.includes(t.indexOf(a))&&e.indexOf(t.indexOf(a))===_))),U(!1),A(null),C(w("activityDeletedMsg"),{variant:"success"})}catch{C(w("deleteErrorMsg"),{variant:"error"})}},children:"Excluir"}),(0,t.jsx)(s.Button,{type:"button",onClick:()=>{try{if(null===_)return;let e=eq[y][_],t=!1;f(a=>a.map(a=>{if(!t&&a.type===e.type&&a.label===e.label&&a.date===e.date&&(a.time||"")===(e.time||"")){t=!0;let e=a.meta;return{...a,date:R,time:L,meta:e}}return a})),U(!1),A(null),C(w("activityUpdatedMsg"),{variant:"success"})}catch{C(w("saveErrorMsg"),{variant:"error"})}},children:w("saveLabel")})]})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"px-2 py-1 text-xs rounded-md",onClick:()=>U(!1),children:w("close")})})]})]}):null,e_?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>eA(!1)}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Qual o nome do calendário?"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Nome"}),(0,t.jsx)(d.Input,{value:eR,onChange:e=>eE(e.target.value)})]}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(s.Button,{type:"button",onClick:async()=>{try{let t=(eR||"").replace(/[^A-Za-zÀ-ÖØ-öø-ÿ]/g,"").slice(0,9).trim();if(!t)try{let e=sessionStorage.getItem("calentrip:tripSearch")||localStorage.getItem("calentrip:tripSearch"),a=e?JSON.parse(e):null;if(a){let e="same"===a.mode,n=e?a.origin||"":a.outbound?.origin||"",i=e?a.destination||"":a.outbound?.destination||"";t=`${String(n)}${String(i)}`.replace(/[^A-Za-zÀ-ÖØ-öø-ÿ]/g,"").toUpperCase().slice(0,9)||"CALENDAR"}else t="CALENDAR"}catch{t="CALENDAR"}try{{localStorage.setItem("calentrip:saved_calendar",JSON.stringify({events:e}));let a=localStorage.getItem("calentrip:saved_calendars_list"),n=a?JSON.parse(a):[],i={name:t,events:e,savedAt:new Date().toISOString()},r=n.findIndex(e=>(e?.name||"")===t);r>=0?n[r]=i:n.push(i),localStorage.setItem("calentrip:saved_calendars_list",JSON.stringify(n))}}catch{}try{let e=localStorage.getItem("calentrip:tripSearch"),a=e?JSON.parse(e):null;if(a){let e="same"===a.mode,n=e?a.origin:a.outbound?.origin,i=e?a.destination:a.outbound?.destination,r=e?a.departDate:a.outbound?.date;n&&i&&r&&F&&await (0,p.updateTrip)(F,{reachedFinalCalendar:!0,savedCalendarName:t})}}catch{}eA(!1),C(`salvo com o nome ${t}`,{variant:"success",duration:3e3,sticky:!1});try{localStorage.setItem("calentrip:auto_load_saved","1")}catch{}try{window.location.href="/calendar/final"}catch{}}catch{C(w("saveErrorMsg"),{variant:"error"})}},children:w("saveLabel")})})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"px-2 py-1 text-xs rounded-md",onClick:()=>eA(!1),children:w("close")})})]})]}):null,ew?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ek(!1)}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Permitir localização"}),(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:"A localização é usada para estimar rotas, tempo e opções de transporte até sua hospedagem e aeroporto."}),(0,t.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>{try{localStorage.setItem("calentrip:locConsent","skipped")}catch{}eN("skipped"),ek(!1)},children:"Pular"}),(0,t.jsx)(s.Button,{type:"button",onClick:()=>{try{if(!navigator.geolocation){try{localStorage.setItem("calentrip:locConsent","denied")}catch{}eN("denied"),ek(!1);return}navigator.geolocation.getCurrentPosition(()=>{try{localStorage.setItem("calentrip:locConsent","granted")}catch{}eN("granted"),ek(!1)},()=>{try{localStorage.setItem("calentrip:locConsent","denied")}catch{}eN("denied"),ek(!1)},{enableHighAccuracy:!0,timeout:1e4})}catch{try{localStorage.setItem("calentrip:locConsent","denied")}catch{}eN("denied"),ek(!1)}},children:"Permitir"})]})]})]}):null,G?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{K(!1),V(null)}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Transporte até o aeroporto"}),(0,t.jsx)("div",{className:"space-y-3 text-sm",children:X?(0,t.jsx)("div",{children:"Calculando…"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Destino: ",q?.originIata||"—"]}),(0,t.jsxs)("div",{children:["Distância (a partir da sua localização): ",Z?.distanceKm?`${Z.distanceKm} km`:"—"]}),Z?.distanceKm||"granted"===ej?null:(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Ative a localização para calcular a distância."}),(0,t.jsxs)("div",{children:["Tempo estimado (com trânsito): ",Z?.durationWithTrafficMin?`${Z.durationWithTrafficMin} min`:Z?.durationMin?`${Z.durationMin} min`:"—"]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("a",{className:"underline",href:Z?.gmapsUrl,target:"_blank",rel:"noopener noreferrer",children:"Veja no Google Maps"})}),(0,t.jsx)("div",{children:(0,t.jsxs)("a",{className:"underline flex items-center gap-1",href:Z?.r2rUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px] text-[#febb02]",children:"alt_route"}),(0,t.jsx)("span",{children:"Opções de rota (Rome2Rio)"})]})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:Z?.uberUrl,target:"_blank",rel:"noopener noreferrer",children:"Uber"})}),(0,t.jsx)("div",{className:"mt-2",children:"Chegar no aeroporto: 3h antes do voo."}),(0,t.jsxs)("div",{children:["Chamar Uber às: ",Z?.callTime||"—"]}),(0,t.jsxs)("div",{children:["Notificação programada: ",Z?.notifyAt?`\xe0s ${Z.notifyAt}`:"—"]}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{K(!1),V(null)},children:w("close")})})]})})]})]}):null,ee?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{et(!1),er(null)}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Como chegar ao ponto de partida"}),(0,t.jsx)("div",{className:"space-y-3 text-sm",children:ea?(0,t.jsx)("div",{children:"Calculando…"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Origem: ",ei?.origin||"—"]}),(0,t.jsxs)("div",{children:["Destino: ",ei?.destination||"—"]}),eS.length>1?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-zinc-600",children:"train"===eT?"Escolha a estação de trem:":"air"===eT?"Escolha o aeroporto:":"Escolha a rodoviária:"}),(0,t.jsx)(m.Select,{className:"mt-1",value:String(eI??0),onChange:async e=>{let t=Number(e.target.value),a=eS[t];eM(t);try{let e,t,n,i,r,l=await new Promise(e=>{try{if(!eF())return void e(null);navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4})}catch{e(null)}});if(l){let o={lat:l.coords.latitude,lon:l.coords.longitude},s=`https://router.project-osrm.org/route/v1/driving/${o.lon},${o.lat};${a.lon},${a.lat}?overview=false`,d=await fetch(s),c=await d.json(),m=c?.routes?.[0];m&&(n=Math.round((m.distance??0)/1e3),i=Math.round((m.duration??0)/60));try{let e=await fetch(`https://router.project-osrm.org/route/v1/walking/${o.lon},${o.lat};${a.lon},${a.lat}?overview=false`),t=await e.json(),n=t?.routes?.[0];n&&(r=Math.round((n.duration??0)/60))}catch{}e=`https://www.google.com/maps/dir/?api=1&origin=${o.lat}%2C${o.lon}&destination=${encodeURIComponent(a.name)}`,t=`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${o.lat}&pickup[longitude]=${o.lon}&dropoff[latitude]=${a.lat}&dropoff[longitude]=${a.lon}&dropoff[formatted_address]=${encodeURIComponent(a.name)}`}else e=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(a.name)}`,t=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${a.lat}&dropoff[longitude]=${a.lon}&dropoff[formatted_address]=${encodeURIComponent(a.name)}`;let o=i?Math.round(1.3*i):void 0;try{let e="train"===eT?"calentrip:train_station_selection":"air"===eT?"calentrip:airport_selection":"calentrip:bus_station_selection",t=localStorage.getItem(e),n=t?JSON.parse(t):{};eD&&(n[eD]={name:a.name,lat:a.lat,lon:a.lon}),localStorage.setItem(e,JSON.stringify(n))}catch{}er(l=>({...l||{},destination:a.name,distanceKm:n,drivingMin:o??i,walkingMin:r,gmapsUrl:e,uberUrl:t}))}catch{}},children:eS.map((e,a)=>(0,t.jsx)("option",{value:String(a),children:e.name},`opt-${a}`))})]}):null,(0,t.jsxs)("div",{children:["Distância: ",ei?.distanceKm?`${ei.distanceKm} km`:"—"]}),(0,t.jsxs)("div",{children:["Carro: ",ei?.drivingMin?`${ei.drivingMin} min`:"—"]}),(0,t.jsxs)("div",{children:["Ônibus: ",ei?.busMin?`${ei.busMin} min`:"—"]}),(0,t.jsxs)("div",{children:["Trem/Metro: ",ei?.trainMin?`${ei.trainMin} min`:"—"]}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:ei?.gmapsUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir rota no Google Maps"})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:ei?.uberUrl,target:"_blank",rel:"noopener noreferrer",children:"Chamar Uber"})}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{et(!1),er(null)},children:w("close")})})]})})]})]}):null,el?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{eo(!1),ed(null)}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Chegada e deslocamento até hospedagem"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:["Destino: ",es?.address||es?.city||"—"]}),(0,t.jsxs)("div",{children:["Distância (a partir da sua localização): ",es?.distanceKm?`${es.distanceKm} km`:"—"]}),es?.distanceKm||"granted"===ej?null:(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Ative a localização para calcular a distância."}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:es?.gmapsUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir rota no Google Maps"})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:es?.uberUrl,target:"_blank",rel:"noopener noreferrer",children:"Chamar Uber"})}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{eo(!1),ed(null)},children:w("close")})})]})]})]}):null,ec?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{em(!1),eg(null)}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Como ir até o destino"}),(0,t.jsx)("div",{className:"space-y-3 text-sm",children:eu?(0,t.jsx)("div",{children:"Calculando…"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Destino: ",eh?.destination||"—"]}),(0,t.jsxs)("div",{children:["Distância (a partir da sua localização): ",eh?.distanceKm?`${eh.distanceKm} km`:"—"]}),eh?.distanceKm||"granted"===ej?null:(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Ative a localização para calcular a distância."}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:eh?.gmapsUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir rota no Google Maps"})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:eh?.uberUrl,target:"_blank",rel:"noopener noreferrer",children:"Chamar Uber"})}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{em(!1),eg(null)},children:w("close")})})]})})]})]}):null,ef?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ex(!1)}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:eb||"Documentos"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm max-h-[60vh] overflow-y-auto",children:[ev.length?(0,t.jsx)("ul",{className:"space-y-2",children:ev.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between gap-2 rounded border p-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-zinc-600",children:e.size?`${Math.round(e.size/1024)} KB`:""})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:e.dataUrl?(0,t.jsx)("a",{className:"underline",href:e.dataUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir"}):null})]},e.name))}):(0,t.jsx)("div",{className:"text-zinc-600",children:"Nenhum documento."}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>ex(!1),children:w("close")})})]})]})]}):null]})})]})}e.s(["default",()=>f])}]);