(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87959,e=>{"use strict";let t="attachments";function r(){return new Promise((e,r)=>{let n=indexedDB.open("calentrip-db",1);n.onupgradeneeded=()=>{let e=n.result;e.objectStoreNames.contains(t)||e.createObjectStore(t,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>r(n.error)})}async function n(e){let n=await r(),o=`${Date.now()}-${Math.random().toString(36).slice(2)}`,a={id:o,name:e.name,type:e.type,size:e.size,data:e.slice(0,e.size,e.type)};return await new Promise((e,r)=>{let o=n.transaction(t,"readwrite");o.oncomplete=()=>e(),o.onerror=()=>r(o.error),o.objectStore(t).put(a)}),{id:o,name:a.name,type:a.type,size:a.size}}async function o(e,t){let r=function(e){let t=e.split(","),r=t[0].match(/:(.*?);/),n=r?r[1]:"application/octet-stream",o=atob(t[1]||""),a=o.length,i=new Uint8Array(a);for(;a--;)i[a]=o.charCodeAt(a);return new Blob([i],{type:n})}(e),o=new File([r],t||`attachment-${Date.now()}`,{type:r.type});return await n(o)}async function a(e){let n=await r();return await new Promise((r,o)=>{let a=n.transaction(t,"readonly");a.onerror=()=>o(a.error);let i=a.objectStore(t).get(e);i.onsuccess=()=>{let e=i.result;r(e?e.data:null)},i.onerror=()=>o(i.error)})}async function i(e){let t=await a(e);return t?URL.createObjectURL(t):null}async function c(e){let n=await r();await new Promise((r,o)=>{let a=n.transaction(t,"readwrite");a.oncomplete=()=>r(),a.onerror=()=>o(a.error),a.objectStore(t).delete(e)})}e.s(["getBlob",()=>a,"getObjectUrl",()=>i,"remove",()=>c,"saveFromDataUrl",()=>o,"saveFromFile",()=>n])}]);