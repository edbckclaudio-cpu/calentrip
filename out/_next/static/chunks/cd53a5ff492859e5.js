(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476);function a({className:e="",...a}){return(0,t.jsx)("div",{className:`rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:bg-black dark:border-zinc-800 ${e}`,...a})}function n({className:e="",...a}){return(0,t.jsx)("div",{className:`mb-3 ${e}`,...a})}function i({className:e="",...a}){return(0,t.jsx)("h3",{className:`text-lg font-semibold ${e}`,...a})}function r({className:e="",...a}){return(0,t.jsx)("div",{className:`${e}`,...a})}e.s(["Card",()=>a,"CardContent",()=>r,"CardHeader",()=>n,"CardTitle",()=>i])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let n=(0,a.forwardRef)(function({className:e="",clearOnFocus:n=!1,...i},r){let[s,l]=(0,a.useState)(!1),d=(0,a.useRef)(void 0),{onFocus:o,onBlur:c,onChange:u,value:m}=i;return(0,t.jsx)("input",{ref:r,className:`w-full h-12 rounded-lg border border-zinc-300 bg-white px-3 text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-[#007AFF]/30 disabled:opacity-50 dark:bg-black dark:border-zinc-700 dark:text-zinc-100 ${e}`,...i,...void 0!==m?{value:s?"":m}:{},onFocus:e=>{d.current=m,l(n&&void 0!==m&&""!==String(m)),o?.(e)},onBlur:e=>{l(!1),c?.(e)},onChange:e=>{l(!1),u?.(e)}})});e.s(["Input",0,n])},30826,e=>{"use strict";let t=null,a=null,n="calentrip_db",i=null,r=!1,s=!1;function l(){try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}return{async createConnection(){},open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}async function d(){if(i)return i;try{try{window.db_disabled&&(s=!0,a=l())}catch{}if(!a)try{let t=await e.A(53119);a=t.CapacitorSQLite??t}catch{s=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}a=l()}let t=a;return i={open:async(e,a=!1,n="no-encryption",i=1)=>{try{return await function(e,t=3e3){return Promise.race([e,new Promise((e,a)=>setTimeout(()=>a(Error("timeout")),t))])}(t.open({database:e,version:i,encrypted:a,mode:n}))}catch{try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}s=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return{execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}}}}}}catch{s=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return a=l(),i={open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}}async function o(){if(!r)try{try{if(window.db_disabled){r=!0;return}}catch{}let e=await d();if(!e){r=!0;return}let t=await e.open(n,!1,"no-encryption",1);await t.execute(`
      CREATE TABLE IF NOT EXISTS trips (
        id TEXT PRIMARY KEY NOT NULL,
        title TEXT NOT NULL,
        date TEXT NOT NULL,
        passengers INTEGER,
        flightNotes TEXT,
        reachedFinalCalendar INTEGER DEFAULT 0,
        savedCalendarName TEXT,
        savedAt INTEGER
      );
    `),await t.execute(`
      CREATE TABLE IF NOT EXISTS events (
        event_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        name TEXT NOT NULL,
        label TEXT,
        date TEXT NOT NULL,
        time TEXT,
        address TEXT,
        type TEXT,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `),await t.execute(`
      CREATE TABLE IF NOT EXISTS attachments (
        att_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        leg TEXT NOT NULL,
        name TEXT NOT NULL,
        type TEXT NOT NULL,
        size INTEGER NOT NULL,
        file_id TEXT NOT NULL,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `);try{await t.execute("ALTER TABLE attachments ADD COLUMN category TEXT")}catch{}try{await t.execute("ALTER TABLE attachments ADD COLUMN ref TEXT")}catch{}await t.close(),r=!0}catch{r=!0}}async function c(){try{if(!t)try{let a=await e.A(40402);t=a.Preferences??a}catch{}let a=t?await t.get({key:"migration_complete"}):void 0;if("true"===(a?.value||""))return}catch{}try{let e=localStorage.getItem("calentrip:trips"),a=e?JSON.parse(e):[];if(!a.length){t&&await t.set({key:"migration_complete",value:"true"});return}let i=await d();if(!i){t&&await t.set({key:"migration_complete",value:"true"});return}let r=await i.open(n,!1,"no-encryption",1);for(let e of a){let t=JSON.stringify(e.flightNotes||[]),a=+!!e.reachedFinalCalendar,n=e.savedAt??Date.now();await r.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e.id,e.title,e.date,e.passengers,t,a,e.savedCalendarName||null,n]);let i=e.savedEvents||[];if(Array.isArray(i)&&i.length)for(let t of(await r.run("DELETE FROM events WHERE trip_id = ?",[e.id]),i))await r.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[e.id,t.name||t.label||"Evento",t.label||null,t.date,t.time||null,t.address||null,t.type||null]);let s=e.attachments||[];if(Array.isArray(s)&&s.length)for(let t of(await r.run("DELETE FROM attachments WHERE trip_id = ?",[e.id]),s))await r.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[e.id,t.leg,t.name,t.type,t.size,t.id||""])}await r.close(),t&&await t.set({key:"migration_complete",value:"true"})}catch{try{t&&await t.set({key:"migration_complete",value:"true"})}catch{}}}async function u(e){await o();let t=await d();if(!t||s){try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),a=[e,...t].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(a))}catch{}return}try{let a=await t.open(n,!1,"no-encryption",1);await a.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e.id,e.title,e.date,e.passengers,JSON.stringify(e.flightNotes||[]),+!!e.reachedFinalCalendar,e.savedCalendarName||null,Date.now()]),await a.close()}catch{s=!0;try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),a=[e,...t].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(a))}catch{}}}async function m(e,t){if(await o(),!await d()||s){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),n=a.findIndex(t=>t.id===e);if(n>=0){let e=[...a];e[n]={...e[n],...t},localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let a=[],i=[];if(void 0!==t.title&&(a.push("title = ?"),i.push(t.title)),void 0!==t.date&&(a.push("date = ?"),i.push(t.date)),void 0!==t.passengers&&(a.push("passengers = ?"),i.push(t.passengers)),void 0!==t.flightNotes&&(a.push("flightNotes = ?"),i.push(JSON.stringify(t.flightNotes||[]))),void 0!==t.reachedFinalCalendar&&(a.push("reachedFinalCalendar = ?"),i.push(+!!t.reachedFinalCalendar)),void 0!==t.savedCalendarName&&(a.push("savedCalendarName = ?"),i.push(t.savedCalendarName||null)),void 0!==t.savedAt&&(a.push("savedAt = ?"),i.push(t.savedAt)),!a.length)return;let r=`UPDATE trips SET ${a.join(", ")} WHERE id = ?`,l=await d(),c=await l.open(n,!1,"no-encryption",1);await c.run(r,[...i,e]),await c.close()}async function h(e,t){await o();let a=await d();if(!a||s){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),n=a.findIndex(t=>t.id===e);if(n>=0){let e=[...a];e[n].savedEvents=t,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let i=await a.open(n,!1,"no-encryption",1);for(let a of(await i.run("DELETE FROM events WHERE trip_id = ?",[e]),t))await i.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[e,a.name||a.label||"Evento",a.label||null,a.date,a.time||null,a.address||null,a.type||null]);await i.close()}async function p(){await o();let e=await d();if(!e||s)try{return[...JSON.parse(localStorage.getItem("calentrip:trips")||"[]")].sort((e,t)=>(e.date||"").localeCompare(t.date||""))}catch{return[]}let t=await e.open(n,!1,"no-encryption",1),a=await t.query("SELECT id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt FROM trips ORDER BY date DESC");await t.close();let i=[];for(let e of a?.values||[]){let[t,a,n,r,s,l,d,o]=e,c=(()=>{try{return JSON.parse(String(s||"[]"))}catch{return[]}})();i.push({id:t,title:a,date:n,passengers:Number(r||0),flightNotes:c,reachedFinalCalendar:!!l,savedCalendarName:d||void 0,savedAt:o||void 0})}return i}async function x(e){await o();let t=await d();if(!t||s)try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e);return t?.savedEvents||[]}catch{return[]}let a=await t.open(n,!1,"no-encryption",1),i=await a.query("SELECT name, label, date, time, address, type FROM events WHERE trip_id = ? ORDER BY date ASC, time ASC",[e]);await a.close();let r=[];for(let e of i?.values||[]){let[t,a,n,i,s,l]=e;r.push({name:t,label:a||void 0,date:n,time:i||void 0,address:s||void 0,type:l||void 0})}return r}async function b(e){await o();let t=await d();if(!t||s){try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").filter(t=>t.id!==e);localStorage.setItem("calentrip:trips",JSON.stringify(t))}catch{}return}let a=await t.open(n,!1,"no-encryption",1);await a.run("DELETE FROM events WHERE trip_id = ?",[e]),await a.run("DELETE FROM attachments WHERE trip_id = ?",[e]),await a.run("DELETE FROM trips WHERE id = ?",[e]),await a.close()}async function g(e,t){await o();let a=await d();if(!a||s){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),n=a.findIndex(t=>t.id===e);if(n>=0){let e=[...a];e[n].attachments=t,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let i=await a.open(n,!1,"no-encryption",1);for(let a of(await i.run("DELETE FROM attachments WHERE trip_id = ?",[e]),t))await i.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[e,a.leg,a.name,a.type,a.size,a.id]);await i.close()}async function f(e,t,a,i){await o();let r=await d();if(!r||s){try{let n=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),r=n.findIndex(t=>t.id===e);if(r>=0){let e=[...n],s=(e[r].attachments||[]).concat(i.map(e=>({category:t,ref:a,name:e.name,type:e.type,size:e.size,id:e.id})));e[r].attachments=s,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let l=await r.open(n,!1,"no-encryption",1);for(let n of i)await l.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id, category, ref) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e,t,n.name,n.type,n.size,n.id,t,a]);await l.close()}async function N(e,t,a){await o();let i=await d();if(!i||s)try{let n=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e);return(n?.attachments||[]).filter(e=>(!t||e.category===t||e.leg===t)&&(!a||e.ref===a)).map(e=>({name:e.name,type:e.type,size:e.size,id:e.id||""}))}catch{return[]}let r=await i.open(n,!1,"no-encryption",1),l="SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",c=[e];t&&(l+=" AND category = ?",c.push(t)),a&&(l+=" AND ref = ?",c.push(a));let u=await r.query(l,c);return await r.close(),(u?.values||[]).map(e=>{let[t,a,n,i]=e;return{name:t,type:a,size:Number(n||0),id:i}})}async function v(e,t){await o();let a=await d();if(!a||s)try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e),n=a?.attachments||[],i=n.map(e=>({name:e.name,type:e.type,size:e.size,id:e.id||""}));return t?i.filter((e,a)=>n[a]?.leg===t):i}catch{return[]}let i=await a.open(n,!1,"no-encryption",1),r=await i.query(t?"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ? AND leg = ?":"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",t?[e,t]:[e]);return await i.close(),(r?.values||[]).map(e=>{let[t,a,n,i]=e;return{name:t,type:a,size:Number(n||0),id:i}})}e.s(["addTrip",()=>u,"getRefAttachments",()=>N,"getSavedTrips",()=>p,"getTripAttachments",()=>v,"getTripEvents",()=>x,"initDatabase",()=>o,"migrateFromLocalStorage",()=>c,"removeTrip",()=>b,"saveCalendarEvents",()=>h,"saveRefAttachments",()=>f,"saveTripAttachments",()=>g,"updateTrip",()=>m])},27766,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let n=(0,a.forwardRef)(function({className:e="",clearOnFocus:n=!1,...i},r){let[s,l]=(0,a.useState)(!1),d=(0,a.useRef)(void 0),{onFocus:o,onBlur:c,onChange:u,value:m}=i;return(0,t.jsx)("input",{ref:r,type:"date",className:`w-full rounded-md border border-zinc-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black/20 dark:bg-black dark:border-zinc-700 dark:text-zinc-100 ${e}`,...i,value:s?"":m,onFocus:e=>{d.current=m,l(n&&void 0!==m&&""!==String(m)),o?.(e)},onBlur:e=>{l(!1),c?.(e)},onChange:e=>{l(!1),u?.(e)}})});e.s(["CalendarInput",0,n])},62556,e=>{"use strict";var t=e.i(43476),a=e.i(19455),n=e.i(33499),i=e.i(71645);function r({value:e,onChange:r}){let{t:s}=(0,n.useI18n)(),[l,d]=(0,i.useState)(null),o=(0,i.useRef)(null);function c(t,a){r({...e,[t]:Math.max(0,(e[t]??0)+a)})}function u(e){d(e),o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>d(null),1500)}return(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",title:s("ageNotePassengers"),children:[(0,t.jsxs)("div",{className:"relative flex items-center justify-between gap-2 rounded-md border border-zinc-300 px-2 py-1 dark:border-zinc-700","aria-label":s("adults"),title:s("adults"),onMouseEnter:()=>u("adults"),onTouchStart:()=>u("adults"),children:[(0,t.jsx)("span",{className:"text-[10px] font-medium",children:"Ad"}),"adults"===l?(0,t.jsx)("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 rounded bg-[var(--brand)] px-2 py-1 text-[10px] font-semibold text-black shadow",children:s("adults")}):null,(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("adults",-1),onFocus:()=>u("adults"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"remove"})}),(0,t.jsx)("div",{className:"w-7 text-center text-[11px] font-medium",children:e.adults??0}),(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("adults",1),onFocus:()=>u("adults"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"add"})})]})]}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between gap-2 rounded-md border border-zinc-300 px-2 py-1 dark:border-zinc-700","aria-label":s("children"),title:s("children"),onMouseEnter:()=>u("children"),onTouchStart:()=>u("children"),children:[(0,t.jsx)("span",{className:"text-[10px] font-medium",children:"Cri"}),"children"===l?(0,t.jsx)("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 rounded bg-[var(--brand)] px-2 py-1 text-[10px] font-semibold text-black shadow",children:s("children")}):null,(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("children",-1),onFocus:()=>u("children"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"remove"})}),(0,t.jsx)("div",{className:"w-7 text-center text-[11px] font-medium",children:e.children??0}),(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("children",1),onFocus:()=>u("children"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"add"})})]})]}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between gap-2 rounded-md border border-zinc-300 px-2 py-1 dark:border-zinc-700","aria-label":s("infants"),title:s("infants"),onMouseEnter:()=>u("infants"),onTouchStart:()=>u("infants"),children:[(0,t.jsx)("span",{className:"text-[10px] font-medium",children:"Beb"}),"infants"===l?(0,t.jsx)("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 rounded bg-[var(--brand)] px-2 py-1 text-[10px] font-semibold text-black shadow",children:s("infants")}):null,(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("infants",-1),onFocus:()=>u("infants"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"remove"})}),(0,t.jsx)("div",{className:"w-7 text-center text-[11px] font-medium",children:e.infants??0}),(0,t.jsx)(a.Button,{type:"button",className:"h-6 w-6 px-0",onClick:()=>c("infants",1),onFocus:()=>u("infants"),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"add"})})]})]})]})}e.s(["default",()=>r])},23894,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(45295),i=e.i(15288);function r(e){return(0,t.jsx)("table",{className:"w-full border-collapse text-sm",...e})}function s(e){return(0,t.jsx)("thead",{className:"bg-zinc-100 dark:bg-zinc-900",...e})}function l(e){return(0,t.jsx)("tbody",{...e})}function d(e){return(0,t.jsx)("tr",{className:"border-b border-zinc-200 dark:border-zinc-800",...e})}function o(e){return(0,t.jsx)("td",{className:"p-2",...e})}var c=e.i(19455),u=e.i(76639),m=e.i(93479),h=e.i(27766),p=e.i(22016),x=e.i(30826),b=e.i(18566),g=e.i(33499),f=e.i(67489),N=e.i(62556),v=e.i(73635);function y(){let y,j,E,T,w,C,S,I,R,O,{tripSearch:L,setTripSearch:k}=(0,n.useTrip)(),D=(0,b.useRouter)(),[$,A]=(0,a.useState)(null),{t:F}=(0,g.useI18n)(),{show:z}=(0,v.useToast)(),_=(y=new Date,j=e=>String(e).padStart(2,"0"),`${y.getFullYear()}-${j(y.getMonth()+1)}-${j(y.getDate())}`),[M,U]=(0,a.useState)(null),[B,H]=(0,a.useState)({});function J(e){return"number"==typeof e?{adults:e,children:0,infants:0}:e&&"object"==typeof e?{adults:Number(e.adults??1),children:Number(e.children??0),infants:Number(e.infants??0)}:{adults:1,children:0,infants:0}}function X(e){return"number"==typeof e?e:e&&"object"==typeof e?Number(e.adults??0)+Number(e.children??0)+Number(e.infants??0):0}function P(e){return!(!e||1>X(e.passengers))&&("same"===e.mode?!!(e.origin&&e.destination&&e.departDate&&e.returnDate):!!(e.outbound.origin&&e.outbound.destination&&e.outbound.date&&e.inbound.origin&&e.inbound.destination&&e.inbound.date))}let q=(0,a.useMemo)(()=>L?"same"===L.mode?{legs:[{title:`${F("outboundFlight")}: ${L.origin} -> ${L.destination}`,origin:L.origin,destination:L.destination,date:L.departDate},{title:`${F("inboundFlight")}: ${L.destination} -> ${L.origin}`,origin:L.destination,destination:L.origin,date:L.returnDate}],passengers:X(L.passengers)}:{legs:[{title:`${F("outboundFlight")}: ${L.outbound.origin} -> ${L.outbound.destination}`,origin:L.outbound.origin,destination:L.outbound.destination,date:L.outbound.date},{title:`${F("inboundFlight")}: ${L.inbound.origin} -> ${L.inbound.destination}`,origin:L.inbound.origin,destination:L.inbound.destination,date:L.inbound.date}],passengers:X(L.passengers)}:null,[L,F]);function V(e){let t=(e||"").trim().split(":");return 60*Number(t[0]||0)+Number(t[1]||0)}let[W,G]=(0,a.useState)(["",""]),[Y,K]=(0,a.useState)([!1,!1]),[Q,Z]=(0,a.useState)([!1,!1]),[ee,et]=(0,a.useState)({maxH:240,transition:"opacity 250ms ease-out, max-height 250ms ease-out"});if((0,a.useEffect)(()=>{try{let e=window.matchMedia("(max-width: 480px)").matches;et({maxH:e?160:240,transition:e?"opacity 200ms ease-out, max-height 200ms ease-out":"opacity 250ms ease-out, max-height 250ms ease-out"})}catch{}},[]),(0,a.useEffect)(()=>{try{let e=window.matchMedia("(max-width: 480px)"),t=e=>{et({maxH:e.matches?160:240,transition:e.matches?"opacity 200ms ease-out, max-height 200ms ease-out":"opacity 250ms ease-out, max-height 250ms ease-out"})};return e.addEventListener("change",t),()=>{try{e.removeEventListener("change",t)}catch{}}}catch{}},[]),(0,a.useEffect)(()=>{(async()=>{if(q)try{let{getCountryByIata:t}=await e.A(86687),a={};for(let e=0;e<q.legs.length;e++){let n=await t(q.legs[e].destination);n&&(a[e]=n)}H(a)}catch{}})()},[q]),!L||!q)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"mb-3",children:F("noTrips")}),(0,t.jsx)(c.Button,{onClick:()=>D.push("/flights/search"),children:F("searchFlights")})]})});let ea="same"===L.mode?!!(L.departTime&&L.returnTime):!!(L.outbound.time&&L.inbound.time);return(0,t.jsxs)("div",{className:"min-h-screen px-4 py-6 space-y-6",children:[(0,t.jsx)("div",{className:"container-page",children:(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:F("editSearchTitle")})}),(0,t.jsxs)(i.CardContent,{children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("modeLabel")}),(0,t.jsxs)(f.Select,{value:L.mode,onChange:e=>(function(e){if(L&&e!==L.mode)if("same"===e){let e="different"===L.mode?L.outbound.origin??"":L.origin??"",t="different"===L.mode?L.outbound.destination??"":L.destination??"";k({mode:"same",origin:e,destination:t,departDate:"different"===L.mode?L.outbound.date??"":L.departDate??"",returnDate:"different"===L.mode?L.inbound.date??"":L.returnDate??"",passengers:J(L.passengers)})}else k({mode:"different",outbound:{origin:"same"===L.mode?L.origin??"":L.outbound.origin??"",destination:"same"===L.mode?L.destination??"":L.outbound.destination??"",date:"same"===L.mode?L.departDate??"":L.outbound.date??""},inbound:{origin:"same"===L.mode?L.destination??"":L.inbound.origin??"",destination:"same"===L.mode?L.origin??"":L.inbound.destination??"",date:"same"===L.mode?L.returnDate??"":L.inbound.date??""},passengers:J(L.passengers)})})(e.target.value),children:[(0,t.jsx)("option",{value:"same",children:F("searchModeSame")}),(0,t.jsx)("option",{value:"different",children:F("searchModeDifferent")})]})]}),"same"===L.mode?(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("origin")}),(0,t.jsx)(m.Input,{value:L.origin??"",onChange:e=>k({...L,origin:e.target.value}),placeholder:"GRU"}),!L.origin&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("destination")}),(0,t.jsx)(m.Input,{value:L.destination??"",onChange:e=>k({...L,destination:e.target.value}),placeholder:"SDU"}),!L.destination&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("departDate")}),(0,t.jsx)(h.CalendarInput,{value:L.departDate??"",min:_,onChange:e=>k({...L,departDate:e.target.value})}),!L.departDate&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("returnDate")}),(0,t.jsx)(h.CalendarInput,{value:L.returnDate??"",min:L.departDate||void 0,onChange:e=>k({...L,returnDate:e.target.value})}),!L.returnDate&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("passengers")}),(0,t.jsx)(N.default,{value:J(L.passengers),onChange:e=>k({...L,passengers:e})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Button,{type:"button",variant:"secondary",disabled:!P(L),children:F("apply")})})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,t.jsx)("h2",{className:"mb-2 text-sm font-semibold",children:F("outboundFlight")}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("tableOrigin")}),(0,t.jsx)(m.Input,{value:L.outbound.origin??"",onChange:e=>k({...L,outbound:{...L.outbound,origin:e.target.value}}),placeholder:"GRU"}),!L.outbound.origin&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("tableDestination")}),(0,t.jsx)(m.Input,{value:L.outbound.destination??"",onChange:e=>k({...L,outbound:{...L.outbound,destination:e.target.value}}),placeholder:"SDU"}),!L.outbound.destination&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("date")}),(0,t.jsx)(h.CalendarInput,{value:L.outbound.date??"",min:_,onChange:e=>k({...L,outbound:{...L.outbound,date:e.target.value}})}),!L.outbound.date&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,t.jsx)("h2",{className:"mb-2 text-sm font-semibold",children:F("inboundFlight")}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("tableOrigin")}),(0,t.jsx)(m.Input,{value:L.inbound.origin??"",onChange:e=>k({...L,inbound:{...L.inbound,origin:e.target.value}}),placeholder:"SDU"}),!L.inbound.origin&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("tableDestination")}),(0,t.jsx)(m.Input,{value:L.inbound.destination??"",onChange:e=>k({...L,inbound:{...L.inbound,destination:e.target.value}}),placeholder:"GRU"}),!L.inbound.destination&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("date")}),(0,t.jsx)(h.CalendarInput,{value:L.inbound.date??"",min:L.outbound.date||void 0,onChange:e=>k({...L,inbound:{...L.inbound,date:e.target.value}})}),!L.inbound.date&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("required")})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("passengers")}),(0,t.jsx)(N.default,{value:J(L.passengers),onChange:e=>k({...L,passengers:e})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Button,{type:"button",variant:"secondary",disabled:!P(L),children:F("apply")})})]})]})]})}),(0,t.jsxs)("div",{className:"container-page space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:F("summarySearch")})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)(r,{children:[(0,t.jsx)(s,{children:(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{className:"font-semibold",children:F("tableOrigin")}),(0,t.jsx)(o,{className:"font-semibold",children:F("tableDestination")}),(0,t.jsx)(o,{className:"font-semibold",children:F("tableDate")}),(0,t.jsx)(o,{className:"font-semibold",children:F("tablePassengers")})]})}),(0,t.jsx)(l,{children:q.legs.map((e,a)=>(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:e.origin}),(0,t.jsx)(o,{children:e.destination}),(0,t.jsx)(o,{children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.date}),Y[a]&&(0,t.jsx)("span",{className:"rounded px-2 py-0.5 text-[11px] bg-amber-100 text-amber-800 border border-amber-300",children:F("arrivalNextDayLabel")})]}),W[a]&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-600",children:[F("arrivalTime"),": ",W[a]]})]})}),(0,t.jsx)(o,{children:q.passengers})]},a))})]})})]}),q.legs.map((e,a)=>{var n,r,s,l;let d,o,h,x,b,g,f,N=(n=e.origin,r=e.destination,s=e.date,l=q.passengers,o=(d="undefined"!=typeof navigator?navigator.language:"").includes("-")?d.split("-")[1]:"",h=encodeURIComponent(`${n} to ${r}`),[{name:"Google Flights",href:`https://${"BR"===o?"www.google.com.br":"www.google.com"}/travel/flights?q=${h}&d=${s}&cabin=ECONOMY&time=any&adults=${l}`},{name:"Kayak",href:`https://www.kayak.com/flights/${n}-${r}/${s}?adults=${l}`},{name:"Booking",href:`https://www.booking.com/flights/${n}-${r}/${s}?adults=${l}`},{name:"Viajanet",href:`https://www.viajanet.com.br/busca?origin=${n}&destination=${r}&date=${s}&adults=${l}`}]),v="same"===L.mode,y=v?0===a?L.departTime??"":L.returnTime??"":0===a?L.outbound.time??"":L.inbound.time??"",j=v?0===a?L.departFlightNumber??"":L.returnFlightNumber??"":0===a?L.outbound.flightNumber??"":L.inbound.flightNumber??"";return(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-base",children:"flight_takeoff"}),(0,t.jsxs)("span",{children:[e.title,", ",e.date]}),Y[a]&&(0,t.jsx)("span",{className:"ml-2 rounded px-2 py-0.5 text-[11px] bg-amber-100 text-amber-800 border border-amber-300",children:F("arrivalNextDayLabel")})]})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[W[a]&&(0,t.jsxs)("div",{className:"text-xs text-zinc-600",children:[F("arrivalTime"),": ",W[a]]}),(0,t.jsx)(c.Button,{type:"button",onClick:()=>A(a),children:F("searchFlights")}),(0,t.jsxs)(u.Dialog,{open:$===a,onOpenChange:e=>A(e?a:null),children:[(0,t.jsxs)(u.DialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-base",children:"link"}),(0,t.jsx)("span",{children:F("linksSuggested")}),(0,t.jsx)("button",{type:"button","aria-label":F("travelDocsNoteAria"),className:"ml-1 inline-flex h-5 w-5 items-center justify-center rounded-full border border-zinc-300 text-[11px] font-semibold text-zinc-700 hover:bg-zinc-100 dark:border-zinc-700 dark:text-zinc-200",onMouseEnter:()=>U(a),onMouseLeave:()=>U(null),onFocus:()=>U(a),onBlur:()=>U(null),onTouchStart:()=>U(a),onTouchEnd:()=>U(null),children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[16px]",children:"info"})})]}),M===a&&(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"absolute left-0 top-2 mt-2 w-[28rem] max-w-[90vw] rounded-md border border-zinc-200 bg-white p-3 text-sm shadow-lg dark:border-zinc-800 dark:bg-black",children:(b=(x=B[a]??"")?"Brazil"===x?{title:F("docBrazilTitle"),lines:[F("docBrazilLine1"),F("docBrazilLine2")]}:["Argentina","Uruguay","Paraguay","Chile","Bolivia","Peru","Colombia","Ecuador","Venezuela"].includes(x)?{title:`${F("docMercosurTitle")} (${x})`,lines:[F("docMercosurLine1"),F("docMercosurLine2"),F("docMercosurLine3")]}:{title:`${F("docInternationalTitle")} (${x})`,lines:[F("docInternationalLine1"),F("docInternationalLine2"),F("docInternationalLine3")]}:{title:F("docInternationalTitle"),lines:[F("docInternationalLine1"),F("docInternationalLine2"),F("docInternationalLine3")]},(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:b.title}),b.lines.map((e,a)=>(0,t.jsx)("div",{className:"mt-1 text-zinc-700 dark:text-zinc-200",children:e},a)),(0,t.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:[F("docDisclaimer"),(0,t.jsx)("a",{className:"ml-1 underline",href:"https://www.gov.br/anvisa/pt-br/assuntos/viajantes",target:"_blank",rel:"noopener noreferrer",children:F("learnMore")})]})]}))})})]}),(0,t.jsx)("ul",{className:"space-y-2",children:N.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(p.default,{className:"underline",href:e.href,target:"_blank",rel:"noopener noreferrer",children:e.name})},e.name))}),(0,t.jsx)(u.DialogFooter,{children:(0,t.jsx)(c.Button,{type:"button",onClick:()=>A(null),children:F("close")})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("departureTime")}),(0,t.jsx)(m.Input,{placeholder:"",value:y,type:"tel",inputMode:"numeric",pattern:"[0-9]*",onChange:e=>{let t=e.target.value;v?k({...L,departTime:0===a?t:L.departTime,returnTime:1===a?t:L.returnTime}):k({...L,outbound:{...L.outbound,time:0===a?t:L.outbound.time},inbound:{...L.inbound,time:1===a?t:L.inbound.time}})}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("flightNumberOptional")}),(0,t.jsx)(m.Input,{placeholder:"",value:j,inputMode:"text",type:"text",onChange:e=>{let t=e.target.value;v?k({...L,departFlightNumber:0===a?t:L.departFlightNumber,returnFlightNumber:1===a?t:L.returnFlightNumber}):k({...L,outbound:{...L.outbound,flightNumber:0===a?t:L.outbound.flightNumber},inbound:{...L.inbound,flightNumber:1===a?t:L.inbound.flightNumber}})}})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:F("arrivalTime")}),(0,t.jsx)(m.Input,{placeholder:"",value:W[a],type:"tel",inputMode:"numeric",pattern:"[0-9]*",onChange:e=>{let t,n=(t=(e.target.value||"").replace(/\D/g,"").slice(0,4))?t.length<=2?t:`${t.slice(0,2)}:${t.slice(2)}`:"";G(e=>0===a?[n,e[1]]:[e[0],n]);try{let e=y||"",t=n||"",i=Q[a];e&&t&&5===t.length&&V(t)<V(e)&&!Y[a]&&!i&&(z(F("arrivalNextDayAsk")),Z(e=>0===a?[!0,e[1]]:[e[0],!0]))}catch{}}}),(g=y||"",f=W[a]||"",g&&f&&V(f)<V(g)&&!Y[a]?(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:F("arrivalNextDayWarn")}):null)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{id:`nextday-${a}`,type:"checkbox",checked:Y[a],onChange:e=>{let t=e.target.checked;K(e=>0===a?[t,e[1]]:[e[0],t]);try{0===a&&localStorage.setItem("calentrip:arrivalNextDay_outbound",String(t)),1===a&&localStorage.setItem("calentrip:arrivalNextDay_inbound",String(t))}catch{}}}),(0,t.jsx)("label",{htmlFor:`nextday-${a}`,className:"text-sm",children:F("arrivalNextDayLabel")})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-start gap-2 rounded-md border border-amber-500 bg-amber-50 p-2 text-xs text-amber-900",style:{maxHeight:Y[a]?ee.maxH:0,opacity:+!!Y[a],transition:ee.transition,overflow:"hidden"},"aria-hidden":!Y[a],children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-amber-700",children:"warning"}),(0,t.jsx)("span",{children:F("arrivalNextDayHelp")})]})]})})]},a)}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(c.Button,{type:"button",disabled:!ea||!P(L)||(E="same"===L.mode?L.departTime||"":L.outbound.time||"",T="same"===L.mode?L.returnTime||"":L.inbound.time||"",w=E&&W[0]&&V(W[0])<V(E)&&!Y[0],C=T&&W[1]&&V(W[1])<V(T)&&!Y[1],!!(w||C)),onClick:async()=>{let e=String(Date.now()),t=`${q.legs[0].origin} → ${q.legs[0].destination}`,a=q.legs[0].date,n="same"===L.mode,i={leg:"outbound",origin:n?L.origin||"":L.outbound.origin||"",destination:n?L.destination||"":L.outbound.destination||"",date:n?L.departDate||"":L.outbound.date||"",departureTime:n?L.departTime||"":L.outbound.time||"",arrivalTime:W[0]||"",flightNumber:n?L.departFlightNumber||"":L.outbound.flightNumber||"",arrivalNextDay:!!Y[0]},r={leg:"inbound",origin:n?L.destination||"":L.inbound.origin||"",destination:n?L.origin||"":L.inbound.destination||"",date:n?L.returnDate||"":L.inbound.date||"",departureTime:n?L.returnTime||"":L.inbound.time||"",arrivalTime:W[1]||"",flightNumber:n?L.returnFlightNumber||"":L.inbound.flightNumber||"",arrivalNextDay:!!Y[1]};(0,x.addTrip)({id:e,title:t,date:a,passengers:q.passengers,flightNotes:[i,r],reachedFinalCalendar:!0});let s=[{name:"Voo de ida",label:`Voo de ida: ${i.date} • ${(i.departureTime||"").trim()}${i.arrivalTime?` → ${i.arrivalTime}${i.arrivalNextDay?" (+1d)":""}`:""} • ${i.origin} → ${i.destination}${i.flightNumber?` • ${i.flightNumber}`:""}`,date:i.date,time:i.departureTime||"",type:"flight"},{name:"Voo de volta",label:`Voo de volta: ${r.date} • ${(r.departureTime||"").trim()}${r.arrivalTime?` → ${r.arrivalTime}${r.arrivalNextDay?" (+1d)":""}`:""} • ${r.origin} → ${r.destination}${r.flightNumber?` • ${r.flightNumber}`:""}`,date:r.date,time:r.departureTime||"",type:"flight"}];try{await (0,x.saveCalendarEvents)(e,s)}catch{}try{await (0,x.updateTrip)(e,{reachedFinalCalendar:!0})}catch{}},children:F("saveTrip")}),(0,t.jsx)(c.Button,{type:"button",disabled:!ea||!P(L)||(S="same"===L.mode?L.departTime||"":L.outbound.time||"",I="same"===L.mode?L.returnTime||"":L.inbound.time||"",R=S&&W[0]&&V(W[0])<V(S)&&!Y[0],O=I&&W[1]&&V(W[1])<V(I)&&!Y[1],!!(R||O)),onClick:()=>D.push("/accommodation/search"),children:F("advanceToStay")})]})]})]})}e.s(["default",()=>y],23894)},53119,e=>{e.v(t=>Promise.all(["static/chunks/234e8831830d8296.js"].map(t=>e.l(t))).then(()=>t(51001)))},40402,e=>{e.v(t=>Promise.all(["static/chunks/da5d6c94d3bd3190.js"].map(t=>e.l(t))).then(()=>t(58981)))},86687,e=>{e.v(t=>Promise.all(["static/chunks/4ceed54824c94356.js"].map(t=>e.l(t))).then(()=>t(62071)))}]);