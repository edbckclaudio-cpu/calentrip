(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476);function a({className:e="",...a}){return(0,t.jsx)("div",{className:`rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:bg-black dark:border-zinc-800 ${e}`,...a})}function i({className:e="",...a}){return(0,t.jsx)("div",{className:`mb-3 ${e}`,...a})}function n({className:e="",...a}){return(0,t.jsx)("h3",{className:`text-lg font-semibold ${e}`,...a})}function s({className:e="",...a}){return(0,t.jsx)("div",{className:`${e}`,...a})}e.s(["Card",()=>a,"CardContent",()=>s,"CardHeader",()=>i,"CardTitle",()=>n])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let i=(0,a.forwardRef)(function({className:e="",clearOnFocus:i=!1,...n},s){let[l,r]=(0,a.useState)(!1),c=(0,a.useRef)(void 0),{onFocus:d,onBlur:o,onChange:u,value:m}=n;return(0,t.jsx)("input",{ref:s,className:`w-full h-12 rounded-lg border border-zinc-300 bg-white px-3 text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-[#007AFF]/30 disabled:opacity-50 dark:bg-black dark:border-zinc-700 dark:text-zinc-100 ${e}`,...n,...void 0!==m?{value:l?"":m}:{},onFocus:e=>{c.current=m,r(i&&void 0!==m&&""!==String(m)),d?.(e)},onBlur:e=>{r(!1),o?.(e)},onChange:e=>{r(!1),u?.(e)}})});e.s(["Input",0,i])},30826,e=>{"use strict";let t=null,a=null,i="calentrip_db",n=null,s=!1,l=!1;function r(){try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}return{async createConnection(){},open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}async function c(){if(n)return n;try{try{window.db_disabled&&(l=!0,a=r())}catch{}if(!a)try{let t=await e.A(53119);a=t.CapacitorSQLite??t}catch{l=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}a=r()}let t=a;return n={open:async(e,a=!1,i="no-encryption",n=1)=>{try{return await function(e,t=3e3){return Promise.race([e,new Promise((e,a)=>setTimeout(()=>a(Error("timeout")),t))])}(t.open({database:e,version:n,encrypted:a,mode:i}))}catch{try{console.warn("⚠️ MODO RECAPE: Rodando sem SQLite nativo")}catch{}l=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return{execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}}}}}}catch{l=!0;try{window.offline=!0}catch{}try{window.db_fallback=!0}catch{}return a=r(),n={open:async()=>({execute:async()=>{},run:async()=>{},query:async()=>void 0,close:async()=>{}})}}}async function d(){if(!s)try{try{if(window.db_disabled){s=!0;return}}catch{}let e=await c();if(!e){s=!0;return}let t=await e.open(i,!1,"no-encryption",1);await t.execute(`
      CREATE TABLE IF NOT EXISTS trips (
        id TEXT PRIMARY KEY NOT NULL,
        title TEXT NOT NULL,
        date TEXT NOT NULL,
        passengers INTEGER,
        flightNotes TEXT,
        reachedFinalCalendar INTEGER DEFAULT 0,
        savedCalendarName TEXT,
        savedAt INTEGER
      );
    `),await t.execute(`
      CREATE TABLE IF NOT EXISTS events (
        event_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        name TEXT NOT NULL,
        label TEXT,
        date TEXT NOT NULL,
        time TEXT,
        address TEXT,
        type TEXT,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `),await t.execute(`
      CREATE TABLE IF NOT EXISTS attachments (
        att_id INTEGER PRIMARY KEY AUTOINCREMENT,
        trip_id TEXT NOT NULL,
        leg TEXT NOT NULL,
        name TEXT NOT NULL,
        type TEXT NOT NULL,
        size INTEGER NOT NULL,
        file_id TEXT NOT NULL,
        FOREIGN KEY (trip_id) REFERENCES trips(id) ON DELETE CASCADE
      );
    `);try{await t.execute("ALTER TABLE attachments ADD COLUMN category TEXT")}catch{}try{await t.execute("ALTER TABLE attachments ADD COLUMN ref TEXT")}catch{}await t.close(),s=!0}catch{s=!0}}async function o(){try{if(!t)try{let a=await e.A(40402);t=a.Preferences??a}catch{}let a=t?await t.get({key:"migration_complete"}):void 0;if("true"===(a?.value||""))return}catch{}try{let e=localStorage.getItem("calentrip:trips"),a=e?JSON.parse(e):[];if(!a.length){t&&await t.set({key:"migration_complete",value:"true"});return}let n=await c();if(!n){t&&await t.set({key:"migration_complete",value:"true"});return}let s=await n.open(i,!1,"no-encryption",1);for(let e of a){let t=JSON.stringify(e.flightNotes||[]),a=+!!e.reachedFinalCalendar,i=e.savedAt??Date.now();await s.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e.id,e.title,e.date,e.passengers,t,a,e.savedCalendarName||null,i]);let n=e.savedEvents||[];if(Array.isArray(n)&&n.length)for(let t of(await s.run("DELETE FROM events WHERE trip_id = ?",[e.id]),n))await s.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[e.id,t.name||t.label||"Evento",t.label||null,t.date,t.time||null,t.address||null,t.type||null]);let l=e.attachments||[];if(Array.isArray(l)&&l.length)for(let t of(await s.run("DELETE FROM attachments WHERE trip_id = ?",[e.id]),l))await s.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[e.id,t.leg,t.name,t.type,t.size,t.id||""])}await s.close(),t&&await t.set({key:"migration_complete",value:"true"})}catch{try{t&&await t.set({key:"migration_complete",value:"true"})}catch{}}}async function u(e){await d();let t=await c();if(!t||l){try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),a=[e,...t].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(a))}catch{}return}try{let a=await t.open(i,!1,"no-encryption",1);await a.run("INSERT OR REPLACE INTO trips (id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e.id,e.title,e.date,e.passengers,JSON.stringify(e.flightNotes||[]),+!!e.reachedFinalCalendar,e.savedCalendarName||null,Date.now()]),await a.close()}catch{l=!0;try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),a=[e,...t].slice(0,20);localStorage.setItem("calentrip:trips",JSON.stringify(a))}catch{}}}async function m(e,t){if(await d(),!await c()||l){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=a.findIndex(t=>t.id===e);if(i>=0){let e=[...a];e[i]={...e[i],...t},localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let a=[],n=[];if(void 0!==t.title&&(a.push("title = ?"),n.push(t.title)),void 0!==t.date&&(a.push("date = ?"),n.push(t.date)),void 0!==t.passengers&&(a.push("passengers = ?"),n.push(t.passengers)),void 0!==t.flightNotes&&(a.push("flightNotes = ?"),n.push(JSON.stringify(t.flightNotes||[]))),void 0!==t.reachedFinalCalendar&&(a.push("reachedFinalCalendar = ?"),n.push(+!!t.reachedFinalCalendar)),void 0!==t.savedCalendarName&&(a.push("savedCalendarName = ?"),n.push(t.savedCalendarName||null)),void 0!==t.savedAt&&(a.push("savedAt = ?"),n.push(t.savedAt)),!a.length)return;let s=`UPDATE trips SET ${a.join(", ")} WHERE id = ?`,r=await c(),o=await r.open(i,!1,"no-encryption",1);await o.run(s,[...n,e]),await o.close()}async function p(e,t){await d();let a=await c();if(!a||l){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=a.findIndex(t=>t.id===e);if(i>=0){let e=[...a];e[i].savedEvents=t,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let n=await a.open(i,!1,"no-encryption",1);for(let a of(await n.run("DELETE FROM events WHERE trip_id = ?",[e]),t))await n.run("INSERT INTO events (trip_id, name, label, date, time, address, type) VALUES (?, ?, ?, ?, ?, ?, ?)",[e,a.name||a.label||"Evento",a.label||null,a.date,a.time||null,a.address||null,a.type||null]);await n.close()}async function h(){await d();let e=await c();if(!e||l)try{return[...JSON.parse(localStorage.getItem("calentrip:trips")||"[]")].sort((e,t)=>(e.date||"").localeCompare(t.date||""))}catch{return[]}let t=await e.open(i,!1,"no-encryption",1),a=await t.query("SELECT id, title, date, passengers, flightNotes, reachedFinalCalendar, savedCalendarName, savedAt FROM trips ORDER BY date DESC");await t.close();let n=[];for(let e of a?.values||[]){let[t,a,i,s,l,r,c,d]=e,o=(()=>{try{return JSON.parse(String(l||"[]"))}catch{return[]}})();n.push({id:t,title:a,date:i,passengers:Number(s||0),flightNotes:o,reachedFinalCalendar:!!r,savedCalendarName:c||void 0,savedAt:d||void 0})}return n}async function x(e){await d();let t=await c();if(!t||l)try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e);return t?.savedEvents||[]}catch{return[]}let a=await t.open(i,!1,"no-encryption",1),n=await a.query("SELECT name, label, date, time, address, type FROM events WHERE trip_id = ? ORDER BY date ASC, time ASC",[e]);await a.close();let s=[];for(let e of n?.values||[]){let[t,a,i,n,l,r]=e;s.push({name:t,label:a||void 0,date:i,time:n||void 0,address:l||void 0,type:r||void 0})}return s}async function g(e){await d();let t=await c();if(!t||l){try{let t=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").filter(t=>t.id!==e);localStorage.setItem("calentrip:trips",JSON.stringify(t))}catch{}return}let a=await t.open(i,!1,"no-encryption",1);await a.run("DELETE FROM events WHERE trip_id = ?",[e]),await a.run("DELETE FROM attachments WHERE trip_id = ?",[e]),await a.run("DELETE FROM trips WHERE id = ?",[e]),await a.close()}async function f(e,t){await d();let a=await c();if(!a||l){try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),i=a.findIndex(t=>t.id===e);if(i>=0){let e=[...a];e[i].attachments=t,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let n=await a.open(i,!1,"no-encryption",1);for(let a of(await n.run("DELETE FROM attachments WHERE trip_id = ?",[e]),t))await n.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id) VALUES (?, ?, ?, ?, ?, ?)",[e,a.leg,a.name,a.type,a.size,a.id]);await n.close()}async function v(e,t,a,n){await d();let s=await c();if(!s||l){try{let i=JSON.parse(localStorage.getItem("calentrip:trips")||"[]"),s=i.findIndex(t=>t.id===e);if(s>=0){let e=[...i],l=(e[s].attachments||[]).concat(n.map(e=>({category:t,ref:a,name:e.name,type:e.type,size:e.size,id:e.id})));e[s].attachments=l,localStorage.setItem("calentrip:trips",JSON.stringify(e))}}catch{}return}let r=await s.open(i,!1,"no-encryption",1);for(let i of n)await r.run("INSERT INTO attachments (trip_id, leg, name, type, size, file_id, category, ref) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[e,t,i.name,i.type,i.size,i.id,t,a]);await r.close()}async function y(e,t,a){await d();let n=await c();if(!n||l)try{let i=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e);return(i?.attachments||[]).filter(e=>(!t||e.category===t||e.leg===t)&&(!a||e.ref===a)).map(e=>({name:e.name,type:e.type,size:e.size,id:e.id||""}))}catch{return[]}let s=await n.open(i,!1,"no-encryption",1),r="SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",o=[e];t&&(r+=" AND category = ?",o.push(t)),a&&(r+=" AND ref = ?",o.push(a));let u=await s.query(r,o);return await s.close(),(u?.values||[]).map(e=>{let[t,a,i,n]=e;return{name:t,type:a,size:Number(i||0),id:n}})}async function b(e,t){await d();let a=await c();if(!a||l)try{let a=JSON.parse(localStorage.getItem("calentrip:trips")||"[]").find(t=>t.id===e),i=a?.attachments||[],n=i.map(e=>({name:e.name,type:e.type,size:e.size,id:e.id||""}));return t?n.filter((e,a)=>i[a]?.leg===t):n}catch{return[]}let n=await a.open(i,!1,"no-encryption",1),s=await n.query(t?"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ? AND leg = ?":"SELECT name, type, size, file_id FROM attachments WHERE trip_id = ?",t?[e,t]:[e]);return await n.close(),(s?.values||[]).map(e=>{let[t,a,i,n]=e;return{name:t,type:a,size:Number(i||0),id:n}})}e.s(["addTrip",()=>u,"getRefAttachments",()=>y,"getSavedTrips",()=>h,"getTripAttachments",()=>b,"getTripEvents",()=>x,"initDatabase",()=>d,"migrateFromLocalStorage",()=>o,"removeTrip",()=>g,"saveCalendarEvents",()=>p,"saveRefAttachments",()=>v,"saveTripAttachments",()=>f,"updateTrip",()=>m])},27766,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let i=(0,a.forwardRef)(function({className:e="",clearOnFocus:i=!1,...n},s){let[l,r]=(0,a.useState)(!1),c=(0,a.useRef)(void 0),{onFocus:d,onBlur:o,onChange:u,value:m}=n;return(0,t.jsx)("input",{ref:s,type:"date",className:`w-full rounded-md border border-zinc-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black/20 dark:bg-black dark:border-zinc-700 dark:text-zinc-100 ${e}`,...n,value:l?"":m,onFocus:e=>{c.current=m,r(i&&void 0!==m&&""!==String(m)),d?.(e)},onBlur:e=>{r(!1),o?.(e)},onChange:e=>{r(!1),u?.(e)}})});e.s(["CalendarInput",0,i])},54794,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(18566),n=e.i(15288),s=e.i(19455),l=e.i(93479),r=e.i(27766),c=e.i(76639),d=e.i(73635),o=e.i(33499),u=e.i(30826);function m(){let m=(0,i.useRouter)(),{t:p}=(0,o.useI18n)(),{show:h,dismiss:x}=(0,d.useToast)(),[g,f]=(0,a.useState)([]),[v,y]=(0,a.useState)(null),[b,N]=(0,a.useState)(null),[j,w]=(0,a.useState)(""),[E,S]=(0,a.useState)(""),[T,C]=(0,a.useState)(""),[k,$]=(0,a.useState)(""),[I,R]=(0,a.useState)([]),[A,L]=(0,a.useState)(null),[O,z]=(0,a.useState)(null),[P,D]=(0,a.useState)(!1),[U,F]=(0,a.useState)([]),[M,_]=(0,a.useState)(null),[B,H]=(0,a.useState)([]),[q,J]=(0,a.useState)({}),[X,W]=(0,a.useState)({}),[V,G]=(0,a.useState)({}),[Y,K]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(null),[ee,et]=(0,a.useState)(null),[ea,ei]=(0,a.useState)(!1),[en,es]=(0,a.useState)([]),[el,er]=(0,a.useState)(null),[ec,ed]=(0,a.useState)({}),[eo,eu]=(0,a.useState)({}),[em,ep]=(0,a.useState)({}),[eh,ex]=(0,a.useState)(null),[eg,ef]=(0,a.useState)(null),[ev,ey]=(0,a.useState)(""),[eb,eN]=(0,a.useState)(""),[ej,ew]=(0,a.useState)(""),[eE,eS]=(0,a.useState)(""),[eT,eC]=(0,a.useState)(!1),[ek,e$]=(0,a.useState)(!1),[eI,eR]=(0,a.useState)(null),[eA,eL]=(0,a.useState)(null),[eO,ez]=(0,a.useState)(!1),[eP,eD]=(0,a.useState)(""),[eU,eF]=(0,a.useState)([]);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("calentrip_trip_summary");if(e){let t=JSON.parse(e),a=Array.isArray(t?.cities)?t.cities:[];f(a)}}catch{}},[]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem("calentrip:entertainment:records"),t=e?JSON.parse(e):[];R(Array.isArray(t)?t:[])}catch{}},[]),(0,a.useEffect)(()=>{if(g.length)try{localStorage.setItem("calentrip_trip_summary",JSON.stringify({cities:g}))}catch{}},[g]);let eM=(0,a.useMemo)(()=>{let e=(e,t)=>new Date(`${e||""} ${t||"00:00"}`.trim().replace(/\//g,"-"));return[...I].sort((t,a)=>e(t.date,t.time).getTime()-e(a.date,a.time).getTime())},[I]);function e_(e){let t=(e||"").replace(/\D/g,"");if(!t)return"";if(t.length<=2)return t;let a=t.slice(0,2),i=t.slice(2,4);return`${a}:${(i||"").padEnd(2,"0").slice(0,2)}`}async function eB(e){try{let t=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(e)}&language=pt&format=json&origin=*`,a=await fetch(t),i=await a.json(),n=i?.search||[],s=n.find(e=>/cidade|city/i.test(e?.description||"")||/municipality|município/i.test(e?.description||""))||n[0];return s?.id||null}catch{return null}}async function eH(e,t,a,i=10){let n=`SELECT ?item ?itemLabel ?official WHERE { ?item wdt:P31/wdt:P279* wd:${t} . ?item wdt:P131 wd:${e} . OPTIONAL { ?item wdt:P856 ?official } SERVICE wikibase:label { bd:serviceParam wikibase:language "pt,en". } } LIMIT ${i}`,s=`https://query.wikidata.org/sparql?query=${encodeURIComponent(n)}`;try{let e=await fetch(s,{headers:{Accept:"application/sparql-results+json"}}),t=await e.json();return(t?.results?.bindings||[]).map(e=>{let t=e?.itemLabel?.value||"",i=e?.official?.value||null,n=null,s=null,l=null,r=null;return"park"===a?(n=!0,s=null,l=!1,r="-"):"museum"===a?(n=!1,s="€10–€25",l=!0,r="1–2 semanas"):"theatre"===a?(n=!1,s="€20–€80",l=!0,r="1–4 semanas"):"attraction"===a?(n=null,s=null,l=null,r=null):"tour"===a&&(n=!1,s="€20–€60",l=!0,r="1–2 semanas"),{name:t,category:a,free:n,price:s,prebook:l,lead:r,url:i}})}catch{return[]}}async function eq(e,t,a,i=15){let n=`PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
SELECT ?item ?itemLabel (COALESCE(?datePoint, ?start) AS ?d) ?official WHERE { 
  ?item wdt:P31/wdt:P279* wd:Q1656682 .
  ?item (wdt:P131|wdt:P276) wd:${e} .
  OPTIONAL { ?item wdt:P585 ?datePoint }
  OPTIONAL { ?item wdt:P580 ?start }
  OPTIONAL { ?item wdt:P582 ?end }
  OPTIONAL { ?item wdt:P856 ?official }
  FILTER(
    (?datePoint >= "${t}"^^xsd:dateTime && ?datePoint <= "${a}"^^xsd:dateTime) ||
    (?start >= "${t}"^^xsd:dateTime && ?start <= "${a}"^^xsd:dateTime) ||
    (?start <= "${t}"^^xsd:dateTime && ?end >= "${t}"^^xsd:dateTime)
  )
  SERVICE wikibase:label { bd:serviceParam wikibase:language "pt,en". }
} LIMIT ${i}`,s=`https://query.wikidata.org/sparql?query=${encodeURIComponent(n)}`;try{let e=await fetch(s,{headers:{Accept:"application/sparql-results+json"}}),t=await e.json();return(t?.results?.bindings||[]).map(e=>({name:e?.itemLabel?.value||"",date:e?.d?.value||"",url:e?.official?.value||null})).filter(e=>e.name&&e.date)}catch{return[]}}async function eJ(e){eL(e),eC(!0),e$(!0);try{let t,a,i,n,s,l,r,c=async e=>{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),i=await a.json();return i[0]?{lat:Number(i[0].lat),lon:Number(i[0].lon),display:i[0].display_name}:null},d=`${e.address||(e.title?`${e.title} ${e.cityName}`:e.cityName)}`.trim(),o=await c(d),u=await new Promise(e=>{navigator.geolocation||e(null),navigator.geolocation.getCurrentPosition(t=>e(t),()=>e(null),{enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4})});if(o&&u){let e={lat:u.coords.latitude,lon:u.coords.longitude},c=`https://router.project-osrm.org/route/v1/driving/${e.lon},${e.lat};${o.lon},${o.lat}?overview=false`,m=await fetch(c),p=await m.json(),h=p?.routes?.[0];h&&(a=Math.round((h.duration??0)/60),r=Math.round((h.distance??0)/1e3));try{let a=`https://router.project-osrm.org/route/v1/walking/${e.lon},${e.lat};${o.lon},${o.lat}?overview=false`,i=await fetch(a),n=await i.json(),s=n?.routes?.[0];s&&(t=Math.round((s.duration??0)/60))}catch{}let x=a?Math.round(1.3*a):void 0;s=x?Math.round(1.8*x):void 0,l=x?Math.round(1.2*x):void 0;let g=Math.round(6*(r||0)+3);i=`https://www.google.com/maps/dir/?api=1&origin=${e.lat}%2C${e.lon}&destination=${encodeURIComponent(d)}`,n=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${o.lat}&dropoff[longitude]=${o.lon}&dropoff[formatted_address]=${encodeURIComponent(d)}`,eR({destination:d,distanceKm:r,walkingMin:t,drivingMin:x??a,busMin:s,trainMin:l,priceEstimate:g,uberUrl:n,gmapsUrl:i})}else eR({destination:d})}catch{eR(null)}finally{e$(!1)}}async function eX(e,t=12){let a=`SELECT ?item ?itemLabel ?official (GROUP_CONCAT(DISTINCT ?cuisineLabel; separator=", ") AS ?cuisines) ?price WHERE {
  ?item wdt:P31/wdt:P279* wd:Q11707 .
  ?item (wdt:P131|wdt:P276) wd:${e} .
  OPTIONAL { ?item wdt:P856 ?official }
  OPTIONAL { ?item wdt:P2012 ?cuisine . ?cuisine rdfs:label ?cuisineLabel FILTER(LANG(?cuisineLabel) = "pt" || LANG(?cuisineLabel) = "en") }
  OPTIONAL { ?item wdt:P2555 ?price }
  SERVICE wikibase:label { bd:serviceParam wikibase:language "pt,en". }
} GROUP BY ?item ?itemLabel ?official ?price LIMIT ${t}`,i=`https://query.wikidata.org/sparql?query=${encodeURIComponent(a)}`;try{let e=await fetch(i,{headers:{Accept:"application/sparql-results+json"}}),t=await e.json();return(t?.results?.bindings||[]).map(e=>({name:e?.itemLabel?.value||"",cuisine:(e?.cuisines?.value||"").split(", ").filter(Boolean),price:e?.price?.value||null,reservation:null,url:e?.official?.value||null})).filter(e=>e.name)}catch{return[]}}async function eW(e){try{let t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`,a=await fetch(t,{headers:{Accept:"application/json"}}),i=(await a.json())[0];if(!i)return null;return{lat:Number(i.lat),lon:Number(i.lon)}}catch{return null}}async function eV(e,t,a=12){let i=`[out:json][timeout:25];
      (
        node(around:8000,${e},${t})[tourism];
        way(around:8000,${e},${t})[tourism];
        node(around:8000,${e},${t})[leisure=park];
        way(around:8000,${e},${t})[leisure=park];
        node(around:8000,${e},${t})[amenity=theatre];
        way(around:8000,${e},${t})[amenity=theatre];
      );
      out tags;`,n=`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(i)}`;try{let e=await fetch(n,{headers:{Accept:"application/json"}}),t=await e.json();return(t?.elements||[]).map(e=>{let t=e.tags||{},a=t.name||t["name:pt"]||t["name:en"]||"",i="attraction";"museum"===t.tourism?i="museum":"park"===t.leisure||"park"===t.tourism?i="park":("theatre"===t.amenity||"theatre"===t.tourism)&&(i="theatre");let n=t.website||t.url||null,s=null,l=null,r=null,c=null;return"park"===i?(s=!0,r=!1,c="-"):"museum"===i?(s=!1,l="€10–€25",r=!0,c="1–2 semanas"):"theatre"===i&&(s=!1,l="€20–€80",r=!0,c="1–4 semanas"),{name:a,category:i,free:s,price:l,prebook:r,lead:c,url:n}}).filter(e=>e.name).slice(0,a)}catch{return[]}}async function eG(e,t,a=12){let i=`https://pt.wikipedia.org/w/api.php?action=query&list=geosearch&gscoord=${e}%7C${t}&gsradius=10000&gslimit=${a}&format=json&origin=*`;try{let e=await fetch(i),t=await e.json();return(t?.query?.geosearch||[]).map(e=>{let t=e?.title||"",a=t?`https://pt.wikipedia.org/wiki/${encodeURIComponent(t.replace(/ /g,"_"))}`:null;return{name:t,category:"attraction",free:null,price:null,prebook:null,lead:null,url:a}}).filter(e=>e.name)}catch{return[]}}async function eY(e,t,a=20){let i=`[out:json][timeout:25];
      (
        node(around:8000,${e},${t})[amenity=restaurant];
        way(around:8000,${e},${t})[amenity=restaurant];
      );
      out tags;`,n=`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(i)}`;try{let e=await fetch(n,{headers:{Accept:"application/json"}}),t=await e.json();return(t?.elements||[]).map(e=>{let t=e.tags||{},a=t.name||t["name:pt"]||t["name:en"]||"",i=t.cuisine||"",n=i?i.split(";").map(e=>e.trim()).filter(Boolean):[],s=t.website||t.url||null;return{name:a,cuisine:n,price:null,reservation:null,url:s}}).filter(e=>e.name).slice(0,a)}catch{return[]}}async function eK(e){L(e),F([]),H([]),_(null),D(!0);try{let t=g[e]?.name||"",a=await eB(t);if(!a){_(p("cityIdError")),D(!1);return}let i=await Promise.all([{qid:"Q33506",cat:"museum"},{qid:"Q22698",cat:"park"},{qid:"Q24354",cat:"theatre"},{qid:"Q570116",cat:"attraction"}].map(e=>eH(a,e.qid,e.cat,8))),n=[].concat(...i);if(!n.length){let e=await eW(t);e&&((n=await eV(e.lat,e.lon,12)).length||(n=await eG(e.lat,e.lon,12)))}F(n);let s=(g[e]?.checkin||"").replace(/\//g,"-"),l=(g[e]?.checkout||s).replace(/\//g,"-");if(s){let e=await eq(a,`${s}T00:00:00`,`${l||s}T23:59:59`),t=s.slice(0,10),i=(l||s).slice(0,10),n=e.filter(e=>{try{let a=new Date(e.date).toISOString().slice(0,10);return a>=t&&a<=i}catch{return!1}}),r=[],c=new Set;for(let e of n){let t=`${e.name}|${new Date(e.date).toISOString().slice(0,10)}`;c.has(t)||(c.add(t),r.push(e))}H(r)}J({}),W({}),G({})}catch{_("Falha ao buscar sugestões")}finally{D(!1)}}async function eQ(e){Z(e),es([]),er(null),ei(!0);try{let t=g[e]?.name||"",a=await eB(t);if(!a){er("Não foi possível identificar a cidade no Wikidata"),ei(!1);return}let i=await eX(a,14);if(!i.length){let e=await eW(t);e&&(i=await eY(e.lat,e.lon,20))}es(i),ed({}),eu({}),ep({})}catch{er("Falha ao buscar restaurantes")}finally{ei(!1)}}return(0,a.useEffect)(()=>{try{localStorage.setItem("calentrip:entertainment:records",JSON.stringify(I))}catch{}},[I]),(0,a.useEffect)(()=>{(async()=>{try{let t=(await (0,u.getSavedTrips)()).sort((e,t)=>Number(t.savedAt||0)-Number(e.savedAt||0))[0];if(!t)return;let a=[...I],i=!1;for(let n=0;n<a.length;n++){let s=a[n],l=s.files||[],r=l.filter(e=>"dataUrl"in e&&!!e.dataUrl);if(r.length){let c=await e.A(10202),d=await Promise.all(r.map(async e=>{let t=await c.saveFromDataUrl(e.dataUrl,e.name);return{name:t.name,type:t.type,size:t.size,id:t.id}})),o=`${s.title}|${s.date}|${s.cityName}`;await (0,u.saveRefAttachments)(t.id,s.kind,o,d),a[n]={...s,files:l.map(e=>{let t=d.find(t=>t.name===e.name&&t.size===e.size);return t?{name:t.name,type:t.type,size:t.size,id:t.id,dataUrl:e.dataUrl}:e})},i=!0}}if(i)try{localStorage.setItem("calentrip:entertainment:records",JSON.stringify(a))}catch{}}catch{}})()},[I]),(0,a.useEffect)(()=>{let e=p("aiSelectDateTimeTip");null!==A?null===O&&z(h(e,{variant:"info",sticky:!0})):null!==O&&(x(O),z(null))},[A,O,h,x,p]),(0,a.useEffect)(()=>{let e=p("aiSelectDateTimeTip");null!==Q?null===ee&&et(h(e,{variant:"info",sticky:!0})):null!==ee&&(x(ee),et(null))},[Q,ee,h,x,p]),(0,t.jsxs)("div",{className:"min-h-screen px-4 py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"container-page",children:[(0,t.jsx)("h1",{className:"mb-1 text-2xl font-semibold text-[var(--brand)]",children:p("entertainmentAndReservationsTitle")}),(0,t.jsx)("p",{className:"text-sm text-zinc-600",children:"Agende atividades e restaurantes por cidade. Ao final, veja o resumo cronológico."})]}),(0,t.jsx)("div",{className:"container-page grid grid-cols-1 gap-6 md:grid-cols-2",children:g.length?g.map((e,a)=>(0,t.jsxs)(n.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:e.name||`Cidade ${a+1}`})}),(0,t.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-sm",children:["Período: ",e.checkin||"—"," → ",e.checkout||"—"]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 p-3 dark:border-zinc-800",children:[(0,t.jsx)("div",{className:"text-[10px] leading-tight font-semibold uppercase tracking-wide text-zinc-600 mb-2 break-all text-center",children:"Atividade/entretenimento"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Button,{type:"button",className:"w-full h-11 rounded-lg font-semibold tracking-wide",onClick:()=>{y(a),N("activity"),w(""),S(""),C("")},children:p("scheduleLabel")}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-zinc-700 dark:text-zinc-300 text-center",children:p("scheduleSmallHint")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Button,{type:"button",className:"w-full h-11 rounded-lg font-semibold tracking-wide",onClick:()=>eK(a),children:p("aiSuggestionsLabel")}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-zinc-700 dark:text-zinc-300 text-center",children:p("aiSuggestionsSmallHint")})]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 p-3 dark:border-zinc-800",children:[(0,t.jsx)("div",{className:"text-[10px] leading-tight font-semibold uppercase tracking-wide text-zinc-600 mb-2 break-all text-center",children:"Restaurante"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Button,{type:"button",variant:"secondary",className:"w-full h-11 rounded-lg font-semibold tracking-wide",onClick:()=>{y(a),N("restaurant"),w(""),S(""),C("")},children:p("scheduleLabel")}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-zinc-700 dark:text-zinc-300 text-center",children:p("scheduleSmallHint")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Button,{type:"button",variant:"secondary",className:"w-full h-11 rounded-lg font-semibold tracking-wide",onClick:()=>eQ(a),children:p("aiSuggestionsLabel")}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-zinc-700 dark:text-zinc-300 text-center",children:p("aiSuggestionsSmallHint")})]})]})]})]})]})]},`city-${a}`)):(0,t.jsxs)(n.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Sem cidades"})}),(0,t.jsx)(n.CardContent,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:p("backAndInformStaysMessage")}),(0,t.jsx)(s.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",onClick:()=>m.push("/accommodation/search"),children:p("backToAccommodationButton")})]})})]})}),(0,t.jsx)("div",{className:"container-page",children:(0,t.jsxs)(n.Card,{className:"rounded-xl shadow-md",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:p("activitiesRestaurantsSummaryTitle")})}),(0,t.jsxs)(n.CardContent,{className:"space-y-3",children:[eM.length?(0,t.jsx)("ul",{className:"space-y-2 text-sm",children:eM.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[e.date," ",e.time||""," • ",e.cityName," • ","activity"===e.kind?p("activityWord"):p("restaurantWord"),": ",e.title,e.address?` • ${e.address}`:""]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>eJ(e),children:p("goHowButton")}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>{let t=I.indexOf(e);t>=0&&(ef(t),ey(e.title),eN(e.date),ew(e.time||""),eS(e.address||""))},children:p("editLabel")}),(0,t.jsx)(s.Button,{type:"button",variant:"secondary",onClick:()=>{let t=I.indexOf(e);t>=0&&(R(e=>e.filter((e,a)=>a!==t)),h(p("itemRemovedMsg"),{variant:"success"}))},children:"Apagar"})]})]},`rec-${a}`))}):(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"Nenhuma atividade ou restaurante registrado."}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",onClick:()=>m.push("/calendar/final"),children:"Ir para o calendário final"})})]})]})}),(0,t.jsxs)(c.Dialog,{open:null!==v&&null!==b,onOpenChange:()=>{y(null),N(null)},children:[(0,t.jsx)(c.DialogHeader,{children:"restaurant"===b?p("scheduleRestaurantTitle"):p("scheduleActivityTitle")}),null!==v&&null!==b&&(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Cidade"}),(0,t.jsx)("div",{className:"rounded border p-2",children:g[v]?.name||`Cidade ${v+1}`})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Título"}),(0,t.jsx)(l.Input,{placeholder:"restaurant"===b?"Nome do restaurante":"Nome da atividade",value:j,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Endereço"}),(0,t.jsx)(l.Input,{placeholder:"Rua, número, bairro",value:k,onChange:e=>$(e.target.value)}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:"Este será o endereço para a geolocalização calcular o deslocamento."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Data"}),(0,t.jsx)(r.CalendarInput,{value:E,min:g[v]?.checkin||void 0,max:g[v]?.checkout||void 0,onChange:e=>S(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Horário"}),(0,t.jsx)(l.Input,{placeholder:"hh:mm",value:T,type:"tel",inputMode:"numeric",pattern:"[0-9]*",onChange:e=>C(e_(e.target.value))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"h-11 rounded-lg font-semibold tracking-wide",onClick:()=>{y(null),N(null),w(""),S(""),C(""),$("")},children:"Cancelar"}),(0,t.jsx)(s.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",disabled:!j||!E,onClick:()=>{let e=g[v]?.name||`Cidade ${v+1}`;R(t=>[...t,{kind:b,cityIdx:v,cityName:e,date:E,time:T,title:j,address:k.trim()||void 0}]),y(null),N(null),$(""),h("restaurant"===b?"Restaurante adicionado":"Atividade adicionada",{variant:"success"})},children:p("saveLabel")})]}),(0,t.jsx)("div",{className:"text-xs text-zinc-600",children:p("useLinksSaveDocsHint")})]})]}),eT&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{eC(!1),eR(null),eL(null)}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsx)(c.DialogHeader,{children:"Como ir até o destino"}),(0,t.jsx)("div",{className:"space-y-3 text-sm",children:ek?(0,t.jsx)("div",{children:"Calculando…"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["Destino: ",eI?.destination||"—"]}),(0,t.jsxs)("div",{children:["Distância: ",eI?.distanceKm?`${eI.distanceKm} km`:"—"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:["A pé: ",eI?.walkingMin?`${eI.walkingMin} min`:"—"]}),(0,t.jsxs)("div",{children:["Ônibus: ",eI?.busMin?`${eI.busMin} min (estimado)`:"—"]}),(0,t.jsxs)("div",{children:["Trem/Metro: ",eI?.trainMin?`${eI.trainMin} min (estimado)`:"—"]}),(0,t.jsxs)("div",{children:["Uber/Táxi: ",eI?.drivingMin?`${eI.drivingMin} min`:"—",eI?.priceEstimate!==void 0?` • R$${eI.priceEstimate}`:""]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:eI?.gmapsUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir rota no Google Maps"})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:eI?.uberUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir Uber com destino preenchido"})}),eA?.files&&eA.files.length?(0,t.jsx)("div",{children:(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>{eD(eA.title),eF(eA.files||[]),ez(!0)},children:"Arquivos salvos"})}):null,(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{eC(!1),eR(null),eL(null)},children:"Fechar"})})]})})]})]}),eO&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{ez(!1),eF([])}}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 w-full rounded-t-2xl border border-zinc-200 bg-white p-5 md:p-6 shadow-xl dark:border-zinc-800 dark:bg-black",children:[(0,t.jsxs)(c.DialogHeader,{children:["Documentos: ",eP]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm max-h-[60vh] overflow-y-auto",children:[eU.length?(0,t.jsx)("ul",{className:"space-y-2",children:eU.map((e,a)=>(0,t.jsxs)("li",{className:"rounded border p-2",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs",children:[e.type," • ",Math.round(e.size/1024)," KB"]}),e.dataUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("a",{className:"underline",href:e.dataUrl,target:"_blank",rel:"noopener noreferrer",children:"Abrir/baixar"})})]},`df-${a}`))}):(0,t.jsx)("div",{className:"text-zinc-600",children:"Nenhum documento salvo."}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{ez(!1),eF([])},children:"Fechar"})})]})]})]}),(0,t.jsxs)(c.Dialog,{open:null!==A,onOpenChange:()=>L(null),children:[(0,t.jsx)(c.DialogHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:[p("aiSuggestionsLabel")," — ",p("scheduleActivityTitle").split(" ")[0]]}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"h-6 px-2 text-[11px]",onClick:()=>L(null),children:p("close")})]})}),null!==A&&(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-4 text-sm max-h-[75vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"rounded border p-2",children:[p("cityLabel"),": ",g[A]?.name||`${p("cityLabel")} ${A+1}`]}),P?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 py-6",children:[(0,t.jsx)("div",{className:"h-6 w-6 rounded-full border-2 border-zinc-300 border-t-[var(--brand)] animate-spin","aria-label":p("loading")}),(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:p("loading")})]}):M?(0,t.jsx)("div",{className:"text-red-600",children:M}):0===U.length?(0,t.jsx)("div",{className:"text-zinc-600",children:p("noSuggestionsFound")}):(0,t.jsxs)(t.Fragment,{children:[B.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 font-semibold",children:p("eventsOnYourDatesLabel")}),(0,t.jsx)("ul",{className:"space-y-2",children:B.map((e,a)=>(0,t.jsxs)("li",{className:"rounded border p-2",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{children:["Data: ",new Date(e.date).toLocaleDateString(void 0,{timeZone:"UTC"})]}),e.url&&(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:e.url,target:"_blank",rel:"noopener noreferrer",children:p("officialSiteLabel")})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(s.Button,{type:"button",onClick:()=>{let t=g[A]?.name||`Cidade ${A+1}`,a=new Date(e.date).toISOString().slice(0,10);R(i=>[...i,{kind:"activity",cityIdx:A,cityName:t,date:a,time:"",title:e.name}]),h(p("activityAddedMsg"),{variant:"success"})},children:p("addToScheduleLabel")})})]},`ev-${a}`))})]}):null,(0,t.jsx)("ul",{className:"space-y-2",children:U.map((e,a)=>(0,t.jsxs)("li",{className:Y===`ai-${a}`?"rounded border-2 border-[#febb02] p-2":"rounded border p-2",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.name," • ","museum"===e.category?"Museu":"park"===e.category?"Parque":"theatre"===e.category?"Teatro":"tour"===e.category?"Tour":"Atração"]}),(0,t.jsxs)("div",{children:["Preço: ",!0===e.free?"Gratuito":!1===e.free?e.price||"Pago":e.price||"Ver no site"]}),(0,t.jsxs)("div",{children:["Ingressos antecipados: ",null===e.prebook?"Ver no site":e.prebook?"Sim":"Não"]}),(0,t.jsxs)("div",{children:["Antecedência: ",e.lead||"Ver no site"]}),e.url&&(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>K(`ai-${a}`),children:p("officialSiteLabel")})}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Data"}),(0,t.jsx)(r.CalendarInput,{value:q[`ai-${a}`]||"",min:g[A]?.checkin||void 0,max:g[A]?.checkout||void 0,onFocus:()=>K(`ai-${a}`),onChange:e=>J(t=>({...t,[`ai-${a}`]:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Horário"}),(0,t.jsx)(l.Input,{placeholder:"hh:mm",value:X[`ai-${a}`]||"",type:"tel",inputMode:"numeric",pattern:"[0-9]*",onFocus:()=>K(`ai-${a}`),onChange:e=>W(t=>({...t,[`ai-${a}`]:e_(e.target.value)}))})]})]}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Foto/Documento da compra"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{id:`ai-cam-${a}`,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:e=>{let t=Array.from(e.target.files||[]);t.length&&Promise.all(t.map(e=>new Promise(t=>{let a=new FileReader;a.onload=()=>t({name:e.name,type:e.type,size:e.size,dataUrl:String(a.result||"")}),a.onerror=()=>t({name:e.name,type:e.type,size:e.size}),a.readAsDataURL(e)}))).then(e=>{G(t=>({...t,[`ai-${a}`]:[...t[`ai-${a}`]||[],...e]})),K(`ai-${a}`)})}}),(0,t.jsx)(s.Button,{type:"button",className:"rounded-lg font-semibold",onClick:()=>{K(`ai-${a}`);let e=document.getElementById(`ai-cam-${a}`);e?.click()},children:p("useCamera")}),(0,t.jsx)("label",{htmlFor:`ai-file-${a}`,className:"inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-semibold bg-[#febb02] text-black hover:bg-[#ffcc3f] cursor-pointer",children:p("attachProofButton")}),(0,t.jsx)(l.Input,{id:`ai-file-${a}`,className:"hidden",type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:e=>{let t=Array.from(e.target.files||[]);if(!t.length){G(e=>({...e,[`ai-${a}`]:e[`ai-${a}`]||[]})),K(`ai-${a}`);return}Promise.all(t.map(e=>new Promise(t=>{let a=new FileReader;a.onload=()=>t({name:e.name,type:e.type,size:e.size,dataUrl:String(a.result||"")}),a.onerror=()=>t({name:e.name,type:e.type,size:e.size}),a.readAsDataURL(e)}))).then(e=>{G(t=>({...t,[`ai-${a}`]:[...t[`ai-${a}`]||[],...e]})),K(`ai-${a}`)})}})]}),!!(V[`ai-${a}`]||[]).length&&(0,t.jsxs)("div",{className:"text-xs text-zinc-600",children:[(V[`ai-${a}`]||[]).length," arquivo(s) selecionado(s)"]})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(s.Button,{type:"button",className:"w-full h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{let t=g[A]?.name||`Cidade ${A+1}`,i=q[`ai-${a}`]||"",n=X[`ai-${a}`]||"",s=V[`ai-${a}`]||[];i&&(R(a=>[...a,{kind:"activity",cityIdx:A,cityName:t,date:i,time:n,title:e.name,files:s}]),h(p("activityAddedMsg"),{variant:"success"}))},children:p("addToScheduleLabel")})})]},`ai-${a}`))})]})]})]}),(0,t.jsxs)(c.Dialog,{open:null!==Q,onOpenChange:()=>Z(null),children:[(0,t.jsx)(c.DialogHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:[p("aiSuggestionsLabel")," — ",p("scheduleRestaurantTitle").split(" ")[1]?p("scheduleRestaurantTitle").split(" ")[1]:p("scheduleRestaurantTitle")]}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",className:"h-6 px-2 text-[11px]",onClick:()=>Z(null),children:p("close")})]})}),null!==Q&&(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-4 text-sm max-h-[75vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"rounded border p-2",children:[p("cityLabel"),": ",g[Q]?.name||`${p("cityLabel")} ${Q+1}`]}),ea?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 py-6",children:[(0,t.jsx)("div",{className:"h-6 w-6 rounded-full border-2 border-zinc-300 border-t-[var(--brand)] animate-spin","aria-label":p("loading")}),(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:p("loading")})]}):el?(0,t.jsx)("div",{className:"text-red-600",children:el}):0===en.length?(0,t.jsx)("div",{className:"text-zinc-600",children:p("noSuggestionsFound")}):(0,t.jsx)("ul",{className:"space-y-2",children:en.map((e,a)=>(0,t.jsxs)("li",{className:eh===`rest-${a}`?"rounded border-2 border-[#febb02] p-2":"rounded border p-2",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.name," • Restaurante"]}),(0,t.jsxs)("div",{children:["Reserva: ",null===e.reservation?"Ver no site":e.reservation?"Necessária":"Opcional"]}),(0,t.jsxs)("div",{children:["Tipo de cozinha: ",e.cuisine&&e.cuisine.length?e.cuisine.join(", "):"Ver no site"]}),(0,t.jsxs)("div",{children:["Faixa de preço: ",e.price||"Ver no site"]}),e.url&&(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"underline",href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>ex(`rest-${a}`),children:p("officialSiteLabel")})}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Data"}),(0,t.jsx)(r.CalendarInput,{value:ec[`rest-${a}`]||"",min:g[Q]?.checkin||void 0,max:g[Q]?.checkout||void 0,onFocus:()=>ex(`rest-${a}`),onChange:e=>ed(t=>({...t,[`rest-${a}`]:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Horário"}),(0,t.jsx)(l.Input,{placeholder:"hh:mm",value:eo[`rest-${a}`]||"",type:"tel",inputMode:"numeric",pattern:"[0-9]*",onFocus:()=>ex(`rest-${a}`),onChange:e=>eu(t=>({...t,[`rest-${a}`]:e_(e.target.value)}))})]})]}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsx)("label",{className:"mb-1 block text-xs",children:"Foto/Documento da reserva"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{id:`rest-cam-${a}`,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:e=>{let t=Array.from(e.target.files||[]);t.length&&Promise.all(t.map(e=>new Promise(t=>{let a=new FileReader;a.onload=()=>t({name:e.name,type:e.type,size:e.size,dataUrl:String(a.result||"")}),a.onerror=()=>t({name:e.name,type:e.type,size:e.size}),a.readAsDataURL(e)}))).then(e=>{ep(t=>({...t,[`rest-${a}`]:[...t[`rest-${a}`]||[],...e]})),ex(`rest-${a}`)})}}),(0,t.jsx)(s.Button,{type:"button",className:"rounded-lg font-semibold",onClick:()=>{ex(`rest-${a}`);let e=document.getElementById(`rest-cam-${a}`);e?.click()},children:p("useCamera")}),(0,t.jsx)("label",{htmlFor:`rest-file-${a}`,className:"inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-semibold bg-[#febb02] text-black hover:bg-[#ffcc3f] cursor-pointer",children:p("attachProofButton")}),(0,t.jsx)(l.Input,{id:`rest-file-${a}`,className:"hidden",type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:e=>{let t=Array.from(e.target.files||[]);if(!t.length){ep(e=>({...e,[`rest-${a}`]:e[`rest-${a}`]||[]})),ex(`rest-${a}`);return}Promise.all(t.map(e=>new Promise(t=>{let a=new FileReader;a.onload=()=>t({name:e.name,type:e.type,size:e.size,dataUrl:String(a.result||"")}),a.onerror=()=>t({name:e.name,type:e.type,size:e.size}),a.readAsDataURL(e)}))).then(e=>{ep(t=>({...t,[`rest-${a}`]:[...t[`rest-${a}`]||[],...e]})),ex(`rest-${a}`)})}})]}),!!(em[`rest-${a}`]||[]).length&&(0,t.jsxs)("div",{className:"text-xs text-zinc-600",children:[(em[`rest-${a}`]||[]).length," arquivo(s) selecionado(s)"]})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(s.Button,{type:"button",className:"w-full h-10 rounded-lg font-semibold tracking-wide",onClick:()=>{let t=g[Q]?.name||`Cidade ${Q+1}`,i=ec[`rest-${a}`]||"",n=eo[`rest-${a}`]||"",s=em[`rest-${a}`]||[];i&&(R(a=>[...a,{kind:"restaurant",cityIdx:Q,cityName:t,date:i,time:n,title:e.name,files:s}]),h(p("restaurantAddedMsg"),{variant:"success"}))},children:p("addToScheduleLabel")})})]},`rest-${a}`))})]})]}),(0,t.jsxs)(c.Dialog,{open:null!==eg,onOpenChange:()=>ef(null),children:[(0,t.jsx)(c.DialogHeader,{children:p("editItemTitle")}),null!==eg&&(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-4 text-sm",children:[(0,t.jsx)("div",{className:"rounded border p-2",children:I[eg]?.cityName}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Título"}),(0,t.jsx)(l.Input,{value:ev,onChange:e=>ey(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Endereço"}),(0,t.jsx)(l.Input,{placeholder:"Rua, número, bairro",value:eE,onChange:e=>eS(e.target.value)}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:"Este será o endereço para a geolocalização calcular o deslocamento."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Data"}),(0,t.jsx)(r.CalendarInput,{value:eb,min:g[I[eg].cityIdx]?.checkin||void 0,max:g[I[eg].cityIdx]?.checkout||void 0,onChange:e=>eN(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm",children:"Horário"}),(0,t.jsx)(l.Input,{placeholder:"hh:mm",value:ej,type:"tel",inputMode:"numeric",pattern:"[0-9]*",onChange:e=>ew(e_(e.target.value))})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(s.Button,{type:"button",className:"h-11 rounded-lg font-semibold tracking-wide",disabled:!ev||!eb,onClick:()=>{R(e=>e.map((e,t)=>t===eg?{...e,title:ev,date:eb,time:ej,address:eE.trim()||e.address}:e)),ef(null),eS(""),h(p("itemUpdatedMsg"),{variant:"success"})},children:p("saveLabel")})}),(0,t.jsx)("div",{className:"text-xs text-zinc-600",children:p("useLinksSaveDocsHint")})]})]})]})}e.s(["default",()=>m])},53119,e=>{e.v(t=>Promise.all(["static/chunks/234e8831830d8296.js"].map(t=>e.l(t))).then(()=>t(51001)))},40402,e=>{e.v(t=>Promise.all(["static/chunks/da5d6c94d3bd3190.js"].map(t=>e.l(t))).then(()=>t(58981)))},10202,e=>{e.v(t=>Promise.all(["static/chunks/1d1636f154b915fd.js"].map(t=>e.l(t))).then(()=>t(87959)))}]);